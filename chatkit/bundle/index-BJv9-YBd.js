const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/ck1/auto-track-C8_AVCKY.js","assets/ck1/index-B5Rsjn5T.js","assets/ck1/index-DfnonTzj.css","assets/ck1/index-DgeuBwzr.js","assets/ck1/index-Bc6QCTlr.js","assets/ck1/is-plan-event-enabled-DeNtQvA5.js","assets/ck1/index-Cva98ZVp.js","assets/ck1/index-BVbjJzGG.js","assets/ck1/index-DAbVYIPT.js"])))=>i.map(i=>d[i]);
import{_ as C,q as p,t as Vt,u as x,w as g,x as m,y as D}from"./index-B5Rsjn5T.js";function Ke(n,e,t){e.split&&(e=e.split("."));for(var r=0,i=e.length,o=n,u,a;r<i&&(a=""+e[r++],!(a==="__proto__"||a==="constructor"||a==="prototype"));)o=o[a]=r===i?t:typeof(u=o[a])==typeof e?u:e[r]*0!==0||~(""+e[r]).indexOf(".")?{}:[]}var Sr=function(n,e){return Object.keys(n).filter(function(t){return e(t,n[t])}).reduce(function(t,r){return t[r]=n[r],t},{})},Y=(function(n){C(e,n);function e(t,r){var i=n.call(this,"".concat(t," ").concat(r))||this;return i.field=t,i}return e})(Error);function te(n){return typeof n=="string"}function Ve(n){return typeof n=="number"}function se(n){return typeof n=="function"}function Ir(n){return n!=null}function F(n){return Object.prototype.toString.call(n).slice(8,-1).toLowerCase()==="object"}var Xe="is not a string",Ze="is not an object",Er="is nil";function Pr(n){if(!Ir(n))throw new Y("Event",Er);if(typeof n!="object")throw new Y("Event",Ze)}function Ar(n){if(!te(n.type))throw new Y(".type",Xe)}function Or(n){if(!te(n.event))throw new Y(".event",Xe)}function xr(n){if(!F(n.properties))throw new Y(".properties",Ze)}function Mr(n){if(!F(n.traits))throw new Y(".traits",Ze)}function Cr(n){if(!te(n.messageId))throw new Y(".messageId",Xe)}function kr(n){Pr(n),Ar(n),Cr(n),n.type==="track"&&(Or(n),xr(n)),["group","identify"].includes(n.type)&&Mr(n)}var Dr=(function(){function n(e){var t,r;this.settings=e,this.createMessageId=e.createMessageId,this.onEventMethodCall=(t=e.onEventMethodCall)!==null&&t!==void 0?t:(function(){}),this.onFinishedEvent=(r=e.onFinishedEvent)!==null&&r!==void 0?r:(function(){})}return n})(),Fr=(function(){function n(e){this.settings=new Dr(e)}return n.prototype.track=function(e,t,r,i){return this.settings.onEventMethodCall({type:"track",options:r}),this.normalize(p(p({},this.baseEvent()),{event:e,type:"track",properties:t??{},options:p({},r),integrations:p({},i)}))},n.prototype.page=function(e,t,r,i,o){var u;this.settings.onEventMethodCall({type:"page",options:i});var a={type:"page",properties:p({},r),options:p({},i),integrations:p({},o)};return e!==null&&(a.category=e,a.properties=(u=a.properties)!==null&&u!==void 0?u:{},a.properties.category=e),t!==null&&(a.name=t),this.normalize(p(p({},this.baseEvent()),a))},n.prototype.screen=function(e,t,r,i,o){this.settings.onEventMethodCall({type:"screen",options:i});var u={type:"screen",properties:p({},r),options:p({},i),integrations:p({},o)};return e!==null&&(u.category=e),t!==null&&(u.name=t),this.normalize(p(p({},this.baseEvent()),u))},n.prototype.identify=function(e,t,r,i){return this.settings.onEventMethodCall({type:"identify",options:r}),this.normalize(p(p({},this.baseEvent()),{type:"identify",userId:e,traits:t??{},options:p({},r),integrations:i}))},n.prototype.group=function(e,t,r,i){return this.settings.onEventMethodCall({type:"group",options:r}),this.normalize(p(p({},this.baseEvent()),{type:"group",traits:t??{},options:p({},r),integrations:p({},i),groupId:e}))},n.prototype.alias=function(e,t,r,i){this.settings.onEventMethodCall({type:"alias",options:r});var o={userId:e,type:"alias",options:p({},r),integrations:p({},i)};return t!==null&&(o.previousId=t),e===void 0?this.normalize(p(p({},o),this.baseEvent())):this.normalize(p(p({},this.baseEvent()),o))},n.prototype.baseEvent=function(){return{integrations:{},options:{}}},n.prototype.context=function(e){var t,r=["userId","anonymousId","timestamp","messageId"];delete e.integrations;var i=Object.keys(e),o=(t=e.context)!==null&&t!==void 0?t:{},u={};return i.forEach(function(a){a!=="context"&&(r.includes(a)?Ke(u,a,e[a]):Ke(o,a,e[a]))}),[o,u]},n.prototype.normalize=function(e){var t,r,i=Object.keys((t=e.integrations)!==null&&t!==void 0?t:{}).reduce(function(d,v){var h,y;return p(p({},d),(h={},h[v]=!!(!((y=e.integrations)===null||y===void 0)&&y[v]),h))},{});e.options=Sr(e.options||{},function(d,v){return v!==void 0});var o=p(p({},i),(r=e.options)===null||r===void 0?void 0:r.integrations),u=e.options?this.context(e.options):[],a=u[0],s=u[1],c=e.options,l=Vt(e,["options"]),f=p(p(p(p({timestamp:new Date},l),{context:a,integrations:o}),s),{messageId:c.messageId||this.settings.createMessageId()});return this.settings.onFinishedEvent(f),kr(f),f},n})();function Rr(n,e){return new Promise(function(t,r){var i=setTimeout(function(){r(Error("Promise timed out"))},e);n.then(function(o){return clearTimeout(i),t(o)}).catch(r)})}function Tr(n){return new Promise(function(e){return setTimeout(e,n)})}function jr(n,e,t){var r=function(){try{return Promise.resolve(e(n))}catch(i){return Promise.reject(i)}};return Tr(t).then(function(){return Rr(r(),1e3)}).catch(function(i){n?.log("warn","Callback Error",{error:i}),n?.stats.increment("callback_error")}).then(function(){return n})}var Gt=function(){var n,e,t=!1,r=new Promise(function(i,o){n=function(){for(var u=[],a=0;a<arguments.length;a++)u[a]=arguments[a];t=!0,i.apply(void 0,u)},e=function(){for(var u=[],a=0;a<arguments.length;a++)u[a]=arguments[a];t=!0,o.apply(void 0,u)}});return{resolve:n,reject:e,promise:r,isSettled:function(){return t}}},Ye=(function(){function n(e){var t;this.callbacks={},this.warned=!1,this.maxListeners=(t=e?.maxListeners)!==null&&t!==void 0?t:10}return n.prototype.warnIfPossibleMemoryLeak=function(e){this.warned||this.maxListeners&&this.callbacks[e].length>this.maxListeners&&(console.warn("Event Emitter: Possible memory leak detected; ".concat(String(e)," has exceeded ").concat(this.maxListeners," listeners.")),this.warned=!0)},n.prototype.on=function(e,t){return this.callbacks[e]?(this.callbacks[e].push(t),this.warnIfPossibleMemoryLeak(e)):this.callbacks[e]=[t],this},n.prototype.once=function(e,t){var r=this,i=function(){for(var o=[],u=0;u<arguments.length;u++)o[u]=arguments[u];r.off(e,i),t.apply(r,o)};return this.on(e,i),this},n.prototype.off=function(e,t){var r,i=(r=this.callbacks[e])!==null&&r!==void 0?r:[],o=i.filter(function(u){return u!==t});return this.callbacks[e]=o,this},n.prototype.emit=function(e){for(var t=this,r,i=[],o=1;o<arguments.length;o++)i[o-1]=arguments[o];var u=(r=this.callbacks[e])!==null&&r!==void 0?r:[];return u.forEach(function(a){a.apply(t,i)}),this},n})();function qr(n){var e=Math.random()+1,t=n.minTimeout,r=t===void 0?500:t,i=n.factor,o=i===void 0?2:i,u=n.attempt,a=n.maxTimeout,s=a===void 0?1/0:a;return Math.min(e*r*Math.pow(o,u),s)}var Jt="onRemoveFromFuture",et=(function(n){C(e,n);function e(t,r,i){var o=n.call(this)||this;return o.future=[],o.maxAttempts=t,o.queue=r,o.seen=i??{},o}return e.prototype.push=function(){for(var t=this,r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];var o=r.map(function(u){var a=t.updateAttempts(u);return a>t.maxAttempts||t.includes(u)?!1:(t.queue.push(u),!0)});return this.queue=this.queue.sort(function(u,a){return t.getAttempts(u)-t.getAttempts(a)}),o},e.prototype.pushWithBackoff=function(t,r){var i=this;if(r===void 0&&(r=0),r==0&&this.getAttempts(t)===0)return this.push(t)[0];var o=this.updateAttempts(t);if(o>this.maxAttempts||this.includes(t))return!1;var u=qr({attempt:o-1});return r>0&&u<r&&(u=r),setTimeout(function(){i.queue.push(t),i.future=i.future.filter(function(a){return a.id!==t.id}),i.emit(Jt)},u),this.future.push(t),!0},e.prototype.getAttempts=function(t){var r;return(r=this.seen[t.id])!==null&&r!==void 0?r:0},e.prototype.updateAttempts=function(t){return this.seen[t.id]=this.getAttempts(t)+1,this.getAttempts(t)},e.prototype.includes=function(t){return this.queue.includes(t)||this.future.includes(t)||!!this.queue.find(function(r){return r.id===t.id})||!!this.future.find(function(r){return r.id===t.id})},e.prototype.pop=function(){return this.queue.shift()},Object.defineProperty(e.prototype,"length",{get:function(){return this.queue.length},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"todo",{get:function(){return this.queue.length+this.future.length},enumerable:!1,configurable:!0}),e})(Ye),Z=256,Pe=[],pe;for(;Z--;)Pe[Z]=(Z+256).toString(16).substring(1);function tt(){var n=0,e,t="";if(!pe||Z+16>256){for(pe=Array(n=256);n--;)pe[n]=256*Math.random()|0;n=Z=0}for(;n<16;n++)e=pe[Z+n],n==6?t+=Pe[e&15|64]:n==8?t+=Pe[e&63|128]:t+=Pe[e],n&1&&n>1&&n<11&&(t+="-");return Z++,t}var Lr=(function(){function n(){this._logs=[]}return n.prototype.log=function(e,t,r){var i=new Date;this._logs.push({level:e,message:t,time:i,extras:r})},Object.defineProperty(n.prototype,"logs",{get:function(){return this._logs},enumerable:!1,configurable:!0}),n.prototype.flush=function(){if(this.logs.length>1){var e=this._logs.reduce(function(t,r){var i,o,u,a=p(p({},r),{json:JSON.stringify(r.extras,null," "),extras:r.extras});delete a.time;var s=(u=(o=r.time)===null||o===void 0?void 0:o.toISOString())!==null&&u!==void 0?u:"";return t[s]&&(s="".concat(s,"-").concat(Math.random())),p(p({},t),(i={},i[s]=a,i))},{});console.table?console.table(e):console.log(e)}else this.logs.forEach(function(t){var r=t.level,i=t.message,o=t.extras;r==="info"||r==="debug"?console.log(i,o??""):console[r](i,o??"")});this._logs=[]},n})(),Nr=function(n){var e={gauge:"g",counter:"c"};return e[n]},Wt=(function(){function n(){this.metrics=[]}return n.prototype.increment=function(e,t,r){t===void 0&&(t=1),this.metrics.push({metric:e,value:t,tags:r??[],type:"counter",timestamp:Date.now()})},n.prototype.gauge=function(e,t,r){this.metrics.push({metric:e,value:t,tags:r??[],type:"gauge",timestamp:Date.now()})},n.prototype.flush=function(){var e=this.metrics.map(function(t){return p(p({},t),{tags:t.tags.join(",")})});console.table?console.table(e):console.log(e),this.metrics=[]},n.prototype.serialize=function(){return this.metrics.map(function(e){return{m:e.metric,v:e.value,t:e.tags,k:Nr(e.type),e:e.timestamp}})},n})(),Ur=(function(n){C(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.prototype.gauge=function(){},e.prototype.increment=function(){},e.prototype.flush=function(){},e.prototype.serialize=function(){return[]},e})(Wt),ee=(function(){function n(e){var t,r,i;this.retry=(t=e.retry)!==null&&t!==void 0?t:!0,this.type=(r=e.type)!==null&&r!==void 0?r:"plugin Error",this.reason=(i=e.reason)!==null&&i!==void 0?i:""}return n})(),Oe=(function(){function n(e,t,r,i){t===void 0&&(t=tt()),r===void 0&&(r=new Ur),i===void 0&&(i=new Lr),this.attempts=0,this.event=e,this._id=t,this.logger=i,this.stats=r}return n.system=function(){},n.prototype.isSame=function(e){return e.id===this.id},n.prototype.cancel=function(e){throw e||new ee({reason:"Context Cancel"})},n.prototype.log=function(e,t,r){this.logger.log(e,t,r)},Object.defineProperty(n.prototype,"id",{get:function(){return this._id},enumerable:!1,configurable:!0}),n.prototype.updateEvent=function(e,t){var r;if(e.split(".")[0]==="integrations"){var i=e.split(".")[1];if(((r=this.event.integrations)===null||r===void 0?void 0:r[i])===!1)return this.event}return Ke(this.event,e,t),this.event},n.prototype.failedDelivery=function(){return this._failedDelivery},n.prototype.setFailedDelivery=function(e){this._failedDelivery=e},n.prototype.logs=function(){return this.logger.logs},n.prototype.flush=function(){this.logger.flush(),this.stats.flush()},n.prototype.toJSON=function(){return{id:this._id,event:this.event,logs:this.logger.logs,metrics:this.stats.metrics}},n})();function zr(n,e){var t={};return n.forEach(function(r){var i,o=void 0;{var u=r[e];o=typeof u!="string"?JSON.stringify(u):u}o!==void 0&&(t[o]=x(x([],(i=t[o])!==null&&i!==void 0?i:[],!0),[r],!1))}),t}var Br=function(n){return typeof n=="object"&&n!==null&&"then"in n&&typeof n.then=="function"},Kr=function(){var n,e,t=0;return{done:function(){return n},run:function(r){var i=r();return Br(i)&&(++t===1&&(n=new Promise(function(o){return e=o})),i.finally(function(){return--t===0&&e()})),i}}};function Vr(n){return g(this,void 0,void 0,function(){var e;return m(this,function(t){switch(t.label){case 0:return t.trys.push([0,2,,3]),[4,n()];case 1:return[2,t.sent()];case 2:return e=t.sent(),[2,Promise.reject(e)];case 3:return[2]}})})}function de(n,e){n.log("debug","plugin",{plugin:e.name});var t=new Date().getTime(),r=e[n.event.type];if(r===void 0)return Promise.resolve(n);var i=Vr(function(){return r.apply(e,[n])}).then(function(o){var u=new Date().getTime()-t;return o.stats.gauge("plugin_time",u,["plugin:".concat(e.name)]),o}).catch(function(o){if(o instanceof ee&&o.type==="middleware_cancellation")throw o;return o instanceof ee?(n.log("warn",o.type,{plugin:e.name,error:o}),o):(n.log("error","plugin Error",{plugin:e.name,error:o}),n.stats.increment("plugin_error",1,["plugin:".concat(e.name)]),o)});return i}function Gr(n,e){return de(n,e).then(function(t){if(t instanceof Oe)return t;n.log("debug","Context canceled"),n.stats.increment("context_canceled"),n.cancel(t)})}var Jr=(function(n){C(e,n);function e(t){var r=n.call(this)||this;return r.criticalTasks=Kr(),r.plugins=[],r.failedInitializations=[],r.flushing=!1,r.queue=t,r.queue.on(Jt,function(){r.scheduleFlush(0)}),r}return e.prototype.register=function(t,r,i){return g(this,void 0,void 0,function(){var o,u,a=this;return m(this,function(s){switch(s.label){case 0:return this.plugins.push(r),o=function(c){a.failedInitializations.push(r.name),a.emit("initialization_failure",r),console.warn(r.name,c),t.log("warn","Failed to load destination",{plugin:r.name,error:c}),a.plugins=a.plugins.filter(function(l){return l!==r})},r.type==="destination"&&r.name!=="Segment.io"?(r.load(t,i).catch(o),[3,4]):[3,1];case 1:return s.trys.push([1,3,,4]),[4,r.load(t,i)];case 2:return s.sent(),[3,4];case 3:return u=s.sent(),o(u),[3,4];case 4:return[2]}})})},e.prototype.deregister=function(t,r,i){return g(this,void 0,void 0,function(){var o;return m(this,function(u){switch(u.label){case 0:return u.trys.push([0,3,,4]),r.unload?[4,Promise.resolve(r.unload(t,i))]:[3,2];case 1:u.sent(),u.label=2;case 2:return this.plugins=this.plugins.filter(function(a){return a.name!==r.name}),[3,4];case 3:return o=u.sent(),t.log("warn","Failed to unload destination",{plugin:r.name,error:o}),[3,4];case 4:return[2]}})})},e.prototype.dispatch=function(t){return g(this,void 0,void 0,function(){var r;return m(this,function(i){return t.log("debug","Dispatching"),t.stats.increment("message_dispatched"),this.queue.push(t),r=this.subscribeToDelivery(t),this.scheduleFlush(0),[2,r]})})},e.prototype.subscribeToDelivery=function(t){return g(this,void 0,void 0,function(){var r=this;return m(this,function(i){return[2,new Promise(function(o){var u=function(a,s){a.isSame(t)&&(r.off("flush",u),o(a))};r.on("flush",u)})]})})},e.prototype.dispatchSingle=function(t){return g(this,void 0,void 0,function(){var r=this;return m(this,function(i){return t.log("debug","Dispatching"),t.stats.increment("message_dispatched"),this.queue.updateAttempts(t),t.attempts=1,[2,this.deliver(t).catch(function(o){var u=r.enqueuRetry(o,t);return u?r.subscribeToDelivery(t):(t.setFailedDelivery({reason:o}),t)})]})})},e.prototype.isEmpty=function(){return this.queue.length===0},e.prototype.scheduleFlush=function(t){var r=this;t===void 0&&(t=500),!this.flushing&&(this.flushing=!0,setTimeout(function(){r.flush().then(function(){setTimeout(function(){r.flushing=!1,r.queue.length&&r.scheduleFlush(0)},0)})},t))},e.prototype.deliver=function(t){return g(this,void 0,void 0,function(){var r,i,o,u;return m(this,function(a){switch(a.label){case 0:return[4,this.criticalTasks.done()];case 1:a.sent(),r=Date.now(),a.label=2;case 2:return a.trys.push([2,4,,5]),[4,this.flushOne(t)];case 3:return t=a.sent(),i=Date.now()-r,this.emit("delivery_success",t),t.stats.gauge("delivered",i),t.log("debug","Delivered",t.event),[2,t];case 4:throw o=a.sent(),u=o,t.log("error","Failed to deliver",u),this.emit("delivery_failure",t,u),t.stats.increment("delivery_failed"),o;case 5:return[2]}})})},e.prototype.enqueuRetry=function(t,r){var i=!(t instanceof ee)||t.retry;return i?this.queue.pushWithBackoff(r):!1},e.prototype.flush=function(){return g(this,void 0,void 0,function(){var t,r,i;return m(this,function(o){switch(o.label){case 0:if(this.queue.length===0)return[2,[]];if(t=this.queue.pop(),!t)return[2,[]];t.attempts=this.queue.getAttempts(t),o.label=1;case 1:return o.trys.push([1,3,,4]),[4,this.deliver(t)];case 2:return t=o.sent(),this.emit("flush",t,!0),[3,4];case 3:return r=o.sent(),i=this.enqueuRetry(r,t),i||(t.setFailedDelivery({reason:r}),this.emit("flush",t,!1)),[2,[]];case 4:return[2,[t]]}})})},e.prototype.isReady=function(){return!0},e.prototype.availableExtensions=function(t){var r=this.plugins.filter(function(v){var h,y,w;if(v.type!=="destination"&&v.name!=="Segment.io")return!0;var _=void 0;return(h=v.alternativeNames)===null||h===void 0||h.forEach(function(S){t[S]!==void 0&&(_=t[S])}),(w=(y=t[v.name])!==null&&y!==void 0?y:_)!==null&&w!==void 0?w:(v.name==="Segment.io"?!0:t.All)!==!1}),i=zr(r,"type"),o=i.before,u=o===void 0?[]:o,a=i.enrichment,s=a===void 0?[]:a,c=i.destination,l=c===void 0?[]:c,f=i.after,d=f===void 0?[]:f;return{before:u,enrichment:s,destinations:l,after:d}},e.prototype.flushOne=function(t){var r,i;return g(this,void 0,void 0,function(){var o,u,a,s,c,l,h,f,d,v,h,y,w,_,S;return m(this,function(b){switch(b.label){case 0:if(!this.isReady())throw new Error("Not ready");t.attempts>1&&this.emit("delivery_retry",t),o=this.availableExtensions((r=t.event.integrations)!==null&&r!==void 0?r:{}),u=o.before,a=o.enrichment,s=0,c=u,b.label=1;case 1:return s<c.length?(l=c[s],[4,Gr(t,l)]):[3,4];case 2:h=b.sent(),h instanceof Oe&&(t=h),this.emit("message_enriched",t,l),b.label=3;case 3:return s++,[3,1];case 4:f=0,d=a,b.label=5;case 5:return f<d.length?(v=d[f],[4,de(t,v)]):[3,8];case 6:h=b.sent(),h instanceof Oe&&(t=h),this.emit("message_enriched",t,v),b.label=7;case 7:return f++,[3,5];case 8:return y=this.availableExtensions((i=t.event.integrations)!==null&&i!==void 0?i:{}),w=y.destinations,_=y.after,[4,new Promise(function(A,E){setTimeout(function(){var P=w.map(function(k){return de(t,k)});Promise.all(P).then(A).catch(E)},0)})];case 9:return b.sent(),t.stats.increment("message_delivered"),this.emit("message_delivered",t),S=_.map(function(A){return de(t,A)}),[4,Promise.all(S)];case 10:return b.sent(),[2,t]}})})},e})(Ye),Wr=function(n,e){var t=Date.now()-n;return Math.max((e??300)-t,0)};function Qr(n,e,t,r){return g(this,void 0,void 0,function(){var i,o;return m(this,function(u){switch(u.label){case 0:return t.emit("dispatch_start",n),i=Date.now(),e.isEmpty()?[4,e.dispatchSingle(n)]:[3,2];case 1:return o=u.sent(),[3,4];case 2:return[4,e.dispatch(n)];case 3:o=u.sent(),u.label=4;case 4:return r?.callback?[4,jr(o,r.callback,Wr(i,r.timeout))]:[3,6];case 5:o=u.sent(),u.label=6;case 6:return r?.debug&&o.flush(),[2,o]}})})}function Qt(n,e,t,r){var i,o=[n,e,t,r],u=F(n)?n.event:n;if(!u||!te(u))throw new Error("Event missing");var a=F(n)?(i=n.properties)!==null&&i!==void 0?i:{}:F(e)?e:{},s={};se(t)||(s=t??{}),F(n)&&!se(e)&&(s=e??{});var c=o.find(se);return[u,a,s,c]}function Ge(n,e,t,r,i){var o,u,a=null,s=null,c=[n,e,t,r,i],l=c.filter(te);l[0]!==void 0&&l[1]!==void 0&&(a=l[0],s=l[1]),l.length===1&&(a=null,s=l[0]);var f=c.find(se),d=c.filter(function(y){return s===null?F(y):F(y)||y===null}),v=(o=d[0])!==null&&o!==void 0?o:{},h=(u=d[1])!==null&&u!==void 0?u:{};return[a,s,v,h,f]}var Je=function(n){return function(){for(var e,t,r,i=[],o=0;o<arguments.length;o++)i[o]=arguments[o];for(var u={},a=["callback","options","traits","id"],s=0,c=i;s<c.length;s++){var l=c[s],f=a.pop();if(f==="id"){if(te(l)||Ve(l)){u.id=l.toString();continue}if(l==null)continue;f=a.pop()}if((f==="traits"||f==="options")&&(l==null||F(l))&&(u[f]=l),se(l)){u.callback=l;break}}return[(e=u.id)!==null&&e!==void 0?e:n.id(),(t=u.traits)!==null&&t!==void 0?t:{},(r=u.options)!==null&&r!==void 0?r:{},u.callback]}};function Ht(n,e,t,r){Ve(n)&&(n=n.toString()),Ve(e)&&(e=e.toString());var i=[n,e,t,r],o=i.filter(te),u=o[0],a=u===void 0?n:u,s=o[1],c=s===void 0?null:s,l=i.filter(F)[0],f=l===void 0?{}:l,d=i.find(se);return[a,c,f,d]}function rt(){return typeof window<"u"}function Fi(){return!rt()}function Hr(){return rt()?window.navigator.onLine:!0}function ve(){return!Hr()}function $r(n,e){return e=e||{},new Promise(function(t,r){var i=new XMLHttpRequest,o=[],u=[],a={},s=function(){return{ok:(i.status/100|0)==2,statusText:i.statusText,status:i.status,url:i.responseURL,text:function(){return Promise.resolve(i.responseText)},json:function(){return Promise.resolve(i.responseText).then(JSON.parse)},blob:function(){return Promise.resolve(new Blob([i.response]))},clone:s,headers:{keys:function(){return o},entries:function(){return u},get:function(l){return a[l.toLowerCase()]},has:function(l){return l.toLowerCase()in a}}}};for(var c in i.open(e.method||"get",n,!0),i.onload=function(){i.getAllResponseHeaders().replace(/^(.*?):[^\S\n]*([\s\S]*?)$/gm,function(l,f,d){o.push(f=f.toLowerCase()),u.push([f,d]),a[f]=a[f]?a[f]+","+d:d}),t(s())},i.onerror=r,i.withCredentials=e.credentials=="include",e.headers)i.setRequestHeader(c,e.headers[c]);i.send(e.body||null)})}var nt=function(){return typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:null},Me=function(){for(var n=[],e=0;e<arguments.length;e++)n[e]=arguments[e];var t=nt();return(t&&t.fetch||$r).apply(void 0,n)},Ce="1.76.0",$t="api.segment.io/v1",Xr=function(n,e,t){var r=e.reduce(function(i,o){var u=o.split(":"),a=u[0],s=u[1];return i[a]=s,i},{});return{type:"Counter",metric:n,value:1,tags:p(p({},r),{library:"analytics.js",library_version:"npm:next-".concat(Ce)})}};function Re(n){console.error("Error sending segment performance metrics",n)}var Zr=(function(){function n(e){var t=this,r,i,o,u,a;if(this.host=(r=e?.host)!==null&&r!==void 0?r:$t,this.sampleRate=(i=e?.sampleRate)!==null&&i!==void 0?i:1,this.flushTimer=(o=e?.flushTimer)!==null&&o!==void 0?o:30*1e3,this.maxQueueSize=(u=e?.maxQueueSize)!==null&&u!==void 0?u:20,this.protocol=(a=e?.protocol)!==null&&a!==void 0?a:"https",this.queue=[],this.sampleRate>0){var s=!1,c=function(){s||(s=!0,t.flush().catch(Re),s=!1,setTimeout(c,t.flushTimer))};c()}}return n.prototype.increment=function(e,t){if(e.includes("analytics_js.")&&t.length!==0&&!(Math.random()>this.sampleRate)&&!(this.queue.length>=this.maxQueueSize)){var r=Xr(e,t);this.queue.push(r),e.includes("error")&&this.flush().catch(Re)}},n.prototype.flush=function(){return g(this,void 0,void 0,function(){var e=this;return m(this,function(t){switch(t.label){case 0:return this.queue.length<=0?[2]:[4,this.send().catch(function(r){Re(r),e.sampleRate=0})];case 1:return t.sent(),[2]}})})},n.prototype.send=function(){return g(this,void 0,void 0,function(){var e,t,r;return m(this,function(i){return e={series:this.queue},this.queue=[],t={"Content-Type":"text/plain"},r="".concat(this.protocol,"://").concat(this.host,"/m"),[2,Me(r,{headers:t,body:JSON.stringify(e),method:"POST"})]})})},n})(),ye,Xt=(function(n){C(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.initRemoteMetrics=function(t){ye=new Zr(t)},e.prototype.increment=function(t,r,i){n.prototype.increment.call(this,t,r,i),ye?.increment(t,i??[])},e})(Wt),T=(function(n){C(e,n);function e(t,r){return n.call(this,t,r,new Xt)||this}return e.system=function(){return new this({type:"track",event:"system"})},e})(Oe),Zt="bpc",Yt=function(n,e,t,r,i,o){return{__t:Zt,c:e,p:r,u:n,s:t,t:i,r:o}},Yr=Object.keys(Yt("","","","","",""));function en(n){if(!F(n)||n.__t!==Zt)return!1;for(var e in n)if(!Yr.includes(e))return!1;return!0}var tn=function(n,e){return n.indexOf("?")>-1?n:n+e},rn=function(n){var e=n.indexOf("#");return e===-1?n:n.slice(0,e)},nn=function(n){try{return new URL(n).pathname}catch{return n[0]==="/"?n:"/"+n}},er=function(n){var e=n.c,t=n.p,r=n.s,i=n.u,o=n.r,u=n.t,a=e?nn(e):t,s=e?tn(e,r):rn(i);return{path:a,referrer:o,search:r,title:u,url:s}},tr=function(){var n=document.querySelector("link[rel='canonical']");return Yt(location.href,n&&n.getAttribute("href")||void 0,location.search,location.pathname,document.title,document.referrer)},on=function(){return er(tr())};function an(n,e){return Object.assign.apply(Object,x([{}],e.map(function(t){var r;if(n&&Object.prototype.hasOwnProperty.call(n,t))return r={},r[t]=n[t],r}),!1))}var ie=function(n,e){e===void 0&&(e=on());var t=n.context,r;n.type==="page"&&(r=n.properties&&an(n.properties,Object.keys(e)),n.properties=p(p(p({},e),n.properties),n.name?{name:n.name}:{})),t.page=p(p(p({},e),r),t.page)},rr=(function(n){C(e,n);function e(t){var r=n.call(this,{createMessageId:function(){return"ajs-next-".concat(Date.now(),"-").concat(tt())},onEventMethodCall:function(i){var o=i.options;r.maybeUpdateAnonId(o)},onFinishedEvent:function(i){return r.addIdentity(i),i}})||this;return r.user=t,r}return e.prototype.maybeUpdateAnonId=function(t){t?.anonymousId&&this.user.anonymousId(t.anonymousId)},e.prototype.addIdentity=function(t){this.user.id()&&(t.userId=this.user.id()),this.user.anonymousId()&&(t.anonymousId=this.user.anonymousId())},e.prototype.track=function(t,r,i,o,u){var a=n.prototype.track.call(this,t,r,i,o);return ie(a,u),a},e.prototype.page=function(t,r,i,o,u,a){var s=n.prototype.page.call(this,t,r,i,o,u);return ie(s,a),s},e.prototype.screen=function(t,r,i,o,u,a){var s=n.prototype.screen.call(this,t,r,i,o,u);return ie(s,a),s},e.prototype.identify=function(t,r,i,o,u){var a=n.prototype.identify.call(this,t,r,i,o);return ie(a,u),a},e.prototype.group=function(t,r,i,o,u){var a=n.prototype.group.call(this,t,r,i,o);return ie(a,u),a},e.prototype.alias=function(t,r,i,o,u){var a=n.prototype.alias.call(this,t,r,i,o);return ie(a,u),a},e})(Fr),nr=function(n){return"addMiddleware"in n&&n.type==="destination"},j={getItem:function(){},setItem:function(){},removeItem:function(){}};try{j=rt()&&window.localStorage?window.localStorage:j}catch(n){console.warn("Unable to access localStorage",n)}function ir(n){var e=j.getItem(n);return(e?JSON.parse(e):[]).map(function(t){return new T(t.event,t.id)})}function un(n,e){var t=ir(n),r=x(x([],e,!0),t,!0),i=r.reduce(function(o,u){var a;return p(p({},o),(a={},a[u.id]=u,a))},{});j.setItem(n,JSON.stringify(Object.values(i)))}function or(n){var e=j.getItem(n);return e?JSON.parse(e):{}}function sn(n,e){var t=or(n);j.setItem(n,JSON.stringify(p(p({},t),e)))}function mt(n){j.removeItem(n)}var cn=function(){return new Date().getTime()};function We(n,e,t){t===void 0&&(t=0);var r=50,i="persisted-queue:v1:".concat(n,":lock"),o=function(c){return new Date().getTime()>c},u=j.getItem(i),a=u?JSON.parse(u):null,s=a===null||o(a);if(s){j.setItem(i,JSON.stringify(cn()+r)),e(),j.removeItem(i);return}!s&&t<3?setTimeout(function(){We(n,e,t+1)},r):console.error("Unable to retrieve lock")}var it=(function(n){C(e,n);function e(t,r){var i=n.call(this,t,[])||this,o="persisted-queue:v1:".concat(r,":items"),u="persisted-queue:v1:".concat(r,":seen"),a=[],s={};return We(r,function(){try{a=ir(o),s=or(u),mt(o),mt(u),i.queue=x(x([],a,!0),i.queue,!0),i.seen=p(p({},s),i.seen)}catch(c){console.error(c)}}),window.addEventListener("pagehide",function(){if(i.todo>0){var c=x(x([],i.queue,!0),i.future,!0);try{We(r,function(){un(o,c),sn(u,i.seen)})}catch(l){console.error(l)}}}),i}return e})(et),ln=(function(n){C(e,n);function e(t){return n.call(this,typeof t=="string"?new it(4,t):t)||this}return e.prototype.flush=function(){return g(this,void 0,void 0,function(){return m(this,function(t){return ve()?[2,[]]:[2,n.prototype.flush.call(this)]})})},e})(Jr);function ot(n){for(var e=n.constructor.prototype,t=0,r=Object.getOwnPropertyNames(e);t<r.length;t++){var i=r[t];if(i!=="constructor"){var o=Object.getOwnPropertyDescriptor(n.constructor.prototype,i);o&&typeof o.value=="function"&&(n[i]=n[i].bind(n))}}return n}/*! js-cookie v3.0.1 | MIT */function ge(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)n[r]=t[r]}return n}var fn={read:function(n){return n[0]==='"'&&(n=n.slice(1,-1)),n.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent)},write:function(n){return encodeURIComponent(n).replace(/%(2[346BF]|3[AC-F]|40|5[BDE]|60|7[BCD])/g,decodeURIComponent)}};function Qe(n,e){function t(i,o,u){if(!(typeof document>"u")){u=ge({},e,u),typeof u.expires=="number"&&(u.expires=new Date(Date.now()+u.expires*864e5)),u.expires&&(u.expires=u.expires.toUTCString()),i=encodeURIComponent(i).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape);var a="";for(var s in u)u[s]&&(a+="; "+s,u[s]!==!0&&(a+="="+u[s].split(";")[0]));return document.cookie=i+"="+n.write(o,i)+a}}function r(i){if(!(typeof document>"u"||arguments.length&&!i)){for(var o=document.cookie?document.cookie.split("; "):[],u={},a=0;a<o.length;a++){var s=o[a].split("="),c=s.slice(1).join("=");try{var l=decodeURIComponent(s[0]);if(u[l]=n.read(c,l),i===l)break}catch{}}return i?u[i]:u}}return Object.create({set:t,get:r,remove:function(i,o){t(i,"",ge({},o,{expires:-1}))},withAttributes:function(i){return Qe(this.converter,ge({},this.attributes,i))},withConverter:function(i){return Qe(ge({},this.converter,i),this.attributes)}},{attributes:{value:Object.freeze(e)},converter:{value:Object.freeze(n)}})}var q=Qe(fn,{path:"/"});function dn(n){var e=n.hostname,t=e.split("."),r=t[t.length-1],i=[];if(t.length===4&&parseInt(r,10)>0||t.length<=1)return i;for(var o=t.length-2;o>=0;--o)i.push(t.slice(o).join("."));return i}function vn(n){try{return new URL(n)}catch{return}}function ar(n){var e=vn(n);if(e)for(var t=dn(e),r=0;r<t.length;++r){var i="__tld__",o=t[r],u={domain:"."+o};try{if(q.set(i,"1",u),q.get(i))return q.remove(i,u),o}catch{return}}}var hn=365,ur=(function(){function n(e){e===void 0&&(e=n.defaults),this.options=p(p({},n.defaults),e)}return Object.defineProperty(n,"defaults",{get:function(){return{maxage:hn,domain:ar(window.location.href),path:"/",sameSite:"Lax"}},enumerable:!1,configurable:!0}),n.prototype.opts=function(){return{sameSite:this.options.sameSite,expires:this.options.maxage,domain:this.options.domain,path:this.options.path,secure:this.options.secure}},n.prototype.get=function(e){var t;try{var r=q.get(e);if(r==null)return null;try{return(t=JSON.parse(r))!==null&&t!==void 0?t:null}catch{return r??null}}catch{return null}},n.prototype.set=function(e,t){typeof t=="string"?q.set(e,t,this.opts()):t===null?q.remove(e,this.opts()):q.set(e,JSON.stringify(t),this.opts())},n.prototype.remove=function(e){return q.remove(e,this.opts())},n})(),pn=(function(){function n(){}return n.prototype.localStorageWarning=function(e,t){console.warn("Unable to access ".concat(e,", localStorage may be ").concat(t))},n.prototype.get=function(e){var t;try{var r=localStorage.getItem(e);if(r===null)return null;try{return(t=JSON.parse(r))!==null&&t!==void 0?t:null}catch{return r??null}}catch{return this.localStorageWarning(e,"unavailable"),null}},n.prototype.set=function(e,t){try{localStorage.setItem(e,JSON.stringify(t))}catch{this.localStorageWarning(e,"full")}},n.prototype.remove=function(e){try{return localStorage.removeItem(e)}catch{this.localStorageWarning(e,"unavailable")}},n})(),at=(function(){function n(){this.cache={}}return n.prototype.get=function(e){var t;return(t=this.cache[e])!==null&&t!==void 0?t:null},n.prototype.set=function(e,t){this.cache[e]=t},n.prototype.remove=function(e){delete this.cache[e]},n})(),M={Cookie:"cookie",LocalStorage:"localStorage",Memory:"memory"};function sr(n){return n&&n.stores&&Array.isArray(n.stores)&&n.stores.every(function(e){return Object.values(M).includes(e)})}function yn(n){return typeof n=="object"&&n.name!==void 0}var Te=function(n,e,t,r){console.warn("".concat(n.constructor.name,": Can't ").concat(e,' key "').concat(t,'" | Err: ').concat(r))},N=(function(){function n(e){this.stores=e}return n.prototype.get=function(e){for(var t=null,r=0,i=this.stores;r<i.length;r++){var o=i[r];try{if(t=o.get(e),t!=null)return t}catch(u){Te(o,"get",e,u)}}return null},n.prototype.set=function(e,t){this.stores.forEach(function(r){try{r.set(e,t)}catch(i){Te(r,"set",e,i)}})},n.prototype.clear=function(e){this.stores.forEach(function(t){try{t.remove(e)}catch(r){Te(t,"remove",e,r)}})},n.prototype.getAndSync=function(e){var t=this.get(e),r=typeof t=="number"?t.toString():t;return this.set(e,r),r},n})();function He(n){var e=n.map(function(t){var r,i;switch(yn(t)?(r=t.name,i=t.settings):r=t,r){case M.Cookie:return new ur(i);case M.LocalStorage:return new pn;case M.Memory:return new at;default:throw new Error("Unknown Store Type: ".concat(t))}});return e}function cr(n,e){return n.map(function(t){return e&&t===M.Cookie?{name:t,settings:e}:t})}var B={persist:!0,cookie:{key:"ajs_user_id",oldKey:"ajs_user"},localStorage:{key:"ajs_user_traits"}},ut=(function(){function n(e,t){e===void 0&&(e=B);var r=this,i,o,u,a;this.options={},this.id=function(c){if(r.options.disable)return null;var l=r.identityStore.getAndSync(r.idKey);if(c!==void 0){r.identityStore.set(r.idKey,c);var f=c!==l&&l!==null&&c!==null;f&&r.anonymousId(null)}var d=r.identityStore.getAndSync(r.idKey);if(d)return d;var v=r.legacyUserStore.get(B.cookie.oldKey);return v?typeof v=="object"?v.id:v:null},this.anonymousId=function(c){var l,f;if(r.options.disable)return null;if(c===void 0){var d=(l=r.identityStore.getAndSync(r.anonKey))!==null&&l!==void 0?l:(f=r.legacySIO())===null||f===void 0?void 0:f[0];if(d)return d}return c===null?(r.identityStore.set(r.anonKey,null),r.identityStore.getAndSync(r.anonKey)):(r.identityStore.set(r.anonKey,c??tt()),r.identityStore.getAndSync(r.anonKey))},this.traits=function(c){var l;if(!r.options.disable)return c===null&&(c={}),c&&r.traitsStore.set(r.traitsKey,c??{}),(l=r.traitsStore.get(r.traitsKey))!==null&&l!==void 0?l:{}},this.options=p(p({},B),e),this.cookieOptions=t,this.idKey=(o=(i=e.cookie)===null||i===void 0?void 0:i.key)!==null&&o!==void 0?o:B.cookie.key,this.traitsKey=(a=(u=e.localStorage)===null||u===void 0?void 0:u.key)!==null&&a!==void 0?a:B.localStorage.key,this.anonKey="ajs_anonymous_id",this.identityStore=this.createStorage(this.options,t),this.legacyUserStore=this.createStorage(this.options,t,function(c){return c===M.Cookie}),this.traitsStore=this.createStorage(this.options,t,function(c){return c!==M.Cookie});var s=this.legacyUserStore.get(B.cookie.oldKey);s&&typeof s=="object"&&(s.id&&this.id(s.id),s.traits&&this.traits(s.traits)),ot(this)}return n.prototype.legacySIO=function(){var e=this.legacyUserStore.get("_sio");if(!e)return null;var t=e.split("----"),r=t[0],i=t[1];return[r,i]},n.prototype.identify=function(e,t){if(!this.options.disable){t=t??{};var r=this.id();(r===null||r===e)&&(t=p(p({},this.traits()),t)),e&&this.id(e),this.traits(t)}},n.prototype.logout=function(){this.anonymousId(null),this.id(null),this.traits({})},n.prototype.reset=function(){this.logout(),this.identityStore.clear(this.idKey),this.identityStore.clear(this.anonKey),this.traitsStore.clear(this.traitsKey)},n.prototype.load=function(){return new n(this.options,this.cookieOptions)},n.prototype.save=function(){return!0},n.prototype.createStorage=function(e,t,r){var i=[M.LocalStorage,M.Cookie,M.Memory];return e.disable?new N([]):e.persist?(e.storage!==void 0&&e.storage!==null&&sr(e.storage)&&(i=e.storage.stores),e.localStorageFallbackDisabled&&(i=i.filter(function(o){return o!==M.LocalStorage})),r&&(i=i.filter(r)),new N(He(cr(i,t)))):new N([new at])},n.defaults=B,n})(),bt={persist:!0,cookie:{key:"ajs_group_id"},localStorage:{key:"ajs_group_properties"}},lr=(function(n){C(e,n);function e(t,r){t===void 0&&(t=bt);var i=n.call(this,p(p({},bt),t),r)||this;return i.anonymousId=function(o){},ot(i),i}return e})(ut),st="analytics";function ct(){return window[st]}function gn(n){st=n}function mn(n){window[st]=n}var bn=function(n){return typeof n=="object"&&n!==null&&"then"in n&&typeof n.then=="function"},fr=function(n,e,t){t.getAndRemove(n).forEach(function(r){ke(e,r).catch(console.error)})},_n=function(n,e){return g(void 0,void 0,void 0,function(){var t,r,i;return m(this,function(o){switch(o.label){case 0:t=0,r=e.getAndRemove("addSourceMiddleware"),o.label=1;case 1:return t<r.length?(i=r[t],[4,ke(n,i).catch(console.error)]):[3,4];case 2:o.sent(),o.label=3;case 3:return t++,[3,1];case 4:return[2]}})})},wn=function(n,e){return g(void 0,void 0,void 0,function(){var t,r,i;return m(this,function(o){switch(o.label){case 0:t=0,r=e.getAndRemove("register"),o.label=1;case 1:return t<r.length?(i=r[t],[4,ke(n,i).catch(console.error)]):[3,4];case 2:o.sent(),o.label=3;case 3:return t++,[3,1];case 4:return[2]}})})},Sn=fr.bind(void 0,"on"),In=fr.bind(void 0,"setAnonymousId"),En=function(n,e){Object.keys(e.calls).forEach(function(t){e.getAndRemove(t).forEach(function(r){setTimeout(function(){ke(n,r).catch(console.error)},0)})})},oe=function(n){if(dr(n)){var e=n.pop();return er(e)}},dr=function(n){var e=n[n.length-1];return en(e)},$e=(function(){function n(e,t,r,i){r===void 0&&(r=function(){}),i===void 0&&(i=console.error),this.method=e,this.resolve=r,this.reject=i,this.called=!1,this.args=t}return n})(),Pn=(function(){function n(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._callMap={},this.add.apply(this,e)}return Object.defineProperty(n.prototype,"calls",{get:function(){return this._pushSnippetWindowBuffer(),this._callMap},set:function(e){this._callMap=e},enumerable:!1,configurable:!0}),n.prototype.get=function(e){var t;return(t=this.calls[e])!==null&&t!==void 0?t:[]},n.prototype.getAndRemove=function(e){var t=this.get(e);return this.calls[e]=[],t},n.prototype.add=function(){for(var e=this,t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];t.forEach(function(i){var o=["track","screen","alias","group","page","identify"];o.includes(i.method)&&!dr(i.args)&&(i.args=x(x([],i.args,!0),[tr()],!1)),e.calls[i.method]?e.calls[i.method].push(i):e.calls[i.method]=[i]})},n.prototype.clear=function(){this._pushSnippetWindowBuffer(),this.calls={}},n.prototype.toArray=function(){var e;return(e=[]).concat.apply(e,Object.values(this.calls))},n.prototype._pushSnippetWindowBuffer=function(){},n})();function ke(n,e){return g(this,void 0,void 0,function(){var t,r;return m(this,function(i){switch(i.label){case 0:return i.trys.push([0,3,,4]),e.called?[2,void 0]:(e.called=!0,t=n[e.method].apply(n,e.args),bn(t)?[4,t]:[3,2]);case 1:i.sent(),i.label=2;case 2:return e.resolve(t),[3,4];case 3:return r=i.sent(),e.reject(r),[3,4];case 4:return[2]}})})}var An=(function(){function n(e){var t=this;this.trackSubmit=this._createMethod("trackSubmit"),this.trackClick=this._createMethod("trackClick"),this.trackLink=this._createMethod("trackLink"),this.pageView=this._createMethod("pageview"),this.identify=this._createMethod("identify"),this.reset=this._createMethod("reset"),this.group=this._createMethod("group"),this.track=this._createMethod("track"),this.ready=this._createMethod("ready"),this.alias=this._createMethod("alias"),this.debug=this._createChainableMethod("debug"),this.page=this._createMethod("page"),this.once=this._createChainableMethod("once"),this.off=this._createChainableMethod("off"),this.on=this._createChainableMethod("on"),this.addSourceMiddleware=this._createMethod("addSourceMiddleware"),this.setAnonymousId=this._createMethod("setAnonymousId"),this.addDestinationMiddleware=this._createMethod("addDestinationMiddleware"),this.screen=this._createMethod("screen"),this.register=this._createMethod("register"),this.deregister=this._createMethod("deregister"),this.user=this._createMethod("user"),this.VERSION=Ce,this._preInitBuffer=new Pn,this._promise=e(this._preInitBuffer),this._promise.then(function(r){var i=r[0],o=r[1];t.instance=i,t.ctx=o}).catch(function(){})}return n.prototype.then=function(){for(var e,t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];return(e=this._promise).then.apply(e,t)},n.prototype.catch=function(){for(var e,t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];return(e=this._promise).catch.apply(e,t)},n.prototype.finally=function(){for(var e,t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];return(e=this._promise).finally.apply(e,t)},n.prototype._createMethod=function(e){var t=this;return function(){for(var r,i=[],o=0;o<arguments.length;o++)i[o]=arguments[o];if(t.instance){var u=(r=t.instance)[e].apply(r,i);return Promise.resolve(u)}return new Promise(function(a,s){t._preInitBuffer.add(new $e(e,i,a,s))})}},n.prototype._createChainableMethod=function(e){var t=this;return function(){for(var r,i=[],o=0;o<arguments.length;o++)i[o]=arguments[o];return t.instance?((r=t.instance)[e].apply(r,i),t):(t._preInitBuffer.add(new $e(e,i)),t)}},n})(),ce={},K={},ae={},je={exports:{}},_t;function De(){return _t||(_t=1,(function(n){n.exports=e(t),n.exports.find=n.exports,n.exports.replace=function(a,s,c,l){return e(i).call(this,a,s,c,l),a},n.exports.del=function(a,s,c){return e(r).call(this,a,s,null,c),a};function e(a){return function(s,c,l,f){var d=f&&u(f.normalizer)?f.normalizer:o;c=d(c);for(var v,h=!1;!h;)y();function y(){for(v in s){var w=d(v);if(c.indexOf(w)===0){var _=c.substr(w.length);if(_.charAt(0)==="."||_.length===0){c=_.substr(1);var S=s[v];if(S==null){h=!0;return}if(!c.length){h=!0;return}s=S;return}}}v=void 0,h=!0}if(v)return s==null?s:a(s,v,l)}}function t(a,s){if(a.hasOwnProperty(s))return a[s]}function r(a,s){return a.hasOwnProperty(s)&&delete a[s],a}function i(a,s,c){return a.hasOwnProperty(s)&&(a[s]=c),a}function o(a){return a.replace(/[^a-zA-Z0-9\.]+/g,"").toLowerCase()}function u(a){return typeof a=="function"}})(je)),je.exports}var wt;function On(){if(wt)return ae;wt=1;var n=ae&&ae.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(ae,"__esModule",{value:!0});var e=n(De());function t(i,o){return function(){var u=this.traits(),a=this.properties?this.properties():{};return e.default(u,"address."+i)||e.default(u,i)||(o?e.default(u,"address."+o):null)||(o?e.default(u,o):null)||e.default(a,"address."+i)||e.default(a,i)||(o?e.default(a,"address."+o):null)||(o?e.default(a,o):null)}}function r(i){i.zip=t("postalCode","zip"),i.country=t("country"),i.street=t("street"),i.state=t("state"),i.city=t("city"),i.region=t("region")}return ae.default=r,ae}var le={},St;function xn(){if(St)return le;St=1,Object.defineProperty(le,"__esModule",{value:!0}),le.clone=void 0;function n(e){if(typeof e!="object")return e;if(Object.prototype.toString.call(e)==="[object Object]"){var t={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=n(e[r]));return t}else return Array.isArray(e)?e.map(n):e}return le.clone=n,le}var me={},It;function Mn(){if(It)return me;It=1,Object.defineProperty(me,"__esModule",{value:!0});var n={Salesforce:!0};function e(t){return!n[t]}return me.default=e,me}var be={},Et;function vr(){if(Et)return be;Et=1;var n=/^(\d{4})(?:-?(\d{2})(?:-?(\d{2}))?)?(?:([ T])(\d{2}):?(\d{2})(?::?(\d{2})(?:[,\.](\d{1,}))?)?(?:(Z)|([+\-])(\d{2})(?::?(\d{2}))?)?)?$/;return be.parse=function(e){var t=[1,5,6,7,11,12],r=n.exec(e),i=0;if(!r)return new Date(e);for(var o=0,u;u=t[o];o++)r[u]=parseInt(r[u],10)||0;r[2]=parseInt(r[2],10)||1,r[3]=parseInt(r[3],10)||1,r[2]--,r[8]=r[8]?(r[8]+"00").substring(0,3):0,r[4]===" "?i=new Date().getTimezoneOffset():r[9]!=="Z"&&r[10]&&(i=r[11]*60+r[12],r[10]==="+"&&(i=0-i));var a=Date.UTC(r[1],r[2],r[3],r[5],r[6]+i,r[7],r[8]);return new Date(a)},be.is=function(e,t){return typeof e!="string"||t&&/^\d{4}-\d{2}-\d{2}/.test(e)===!1?!1:n.test(e)},be}var _e={},Pt;function Cn(){if(Pt)return _e;Pt=1;var n=/\d{13}/;return _e.is=function(e){return n.test(e)},_e.parse=function(e){return e=parseInt(e,10),new Date(e)},_e}var we={},At;function kn(){if(At)return we;At=1;var n=/\d{10}/;return we.is=function(e){return n.test(e)},we.parse=function(e){var t=parseInt(e,10)*1e3;return new Date(t)},we}var qe,Ot;function lt(){if(Ot)return qe;Ot=1;var n=vr(),e=Cn(),t=kn(),r=Object.prototype,i=r.toString;function o(s){return i.call(s)==="[object Date]"}function u(s){return i.call(s)==="[object Number]"}qe=function(c){return o(c)?c:u(c)?new Date(a(c)):n.is(c)?n.parse(c):e.is(c)?e.parse(c):t.is(c)?t.parse(c):new Date(c)};function a(s){return s<315576e5?s*1e3:s}return qe}var Le,xt;function Dn(){if(xt)return Le;xt=1;var n=vr();Le=e;function e(i,o){return o===void 0&&(o=!0),i&&typeof i=="object"?t(i,o):Array.isArray(i)?r(i,o):n.is(i,o)?n.parse(i):i}function t(i,o){return Object.keys(i).forEach(function(u){i[u]=e(i[u],o)}),i}function r(i,o){return i.forEach(function(u,a){i[a]=e(u,o)}),i}return Le}var Mt;function re(){if(Mt)return K;Mt=1;var n=K&&K.__importDefault||function(l){return l&&l.__esModule?l:{default:l}};Object.defineProperty(K,"__esModule",{value:!0}),K.Facade=void 0;var e=n(On()),t=xn(),r=n(Mn()),i=n(lt()),o=n(De()),u=n(Dn());function a(l,f){f=f||{},this.raw=t.clone(l),"clone"in f||(f.clone=!0),f.clone&&(l=t.clone(l)),"traverse"in f||(f.traverse=!0),"timestamp"in l?l.timestamp=i.default(l.timestamp):l.timestamp=new Date,f.traverse&&u.default(l),this.opts=f,this.obj=l}K.Facade=a;var s=a.prototype;s.proxy=function(l){var f=l.split(".");l=f.shift();var d=this[l]||this.obj[l];return d&&(typeof d=="function"&&(d=d.call(this)||{}),f.length===0?this.opts.clone?c(d):d:(d=o.default(d,f.join(".")),this.opts.clone?c(d):d))},s.field=function(l){var f=this.obj[l];return this.opts.clone?c(f):f},a.proxy=function(l){return function(){return this.proxy(l)}},a.field=function(l){return function(){return this.field(l)}},a.multi=function(l){return function(){var f=this.proxy(l+"s");if(Array.isArray(f))return f;var d=this.proxy(l);return d&&(d=[this.opts.clone?t.clone(d):d]),d||[]}},a.one=function(l){return function(){var f=this.proxy(l);if(f)return f;var d=this.proxy(l+"s");if(Array.isArray(d))return d[0]}},s.json=function(){var l=this.opts.clone?t.clone(this.obj):this.obj;return this.type&&(l.type=this.type()),l},s.rawEvent=function(){return this.raw},s.options=function(l){var f=this.obj.options||this.obj.context||{},d=this.opts.clone?t.clone(f):f;if(!l)return d;if(this.enabled(l)){var v=this.integrations(),h=v[l]||o.default(v,l);return typeof h!="object"&&(h=o.default(this.options(),l)),typeof h=="object"?h:{}}},s.context=s.options,s.enabled=function(l){var f=this.proxy("options.providers.all");typeof f!="boolean"&&(f=this.proxy("options.all")),typeof f!="boolean"&&(f=this.proxy("integrations.all")),typeof f!="boolean"&&(f=!0);var d=f&&r.default(l),v=this.integrations();if(v.providers&&v.providers.hasOwnProperty(l)&&(d=v.providers[l]),v.hasOwnProperty(l)){var h=v[l];typeof h=="boolean"?d=h:d=!0}return!!d},s.integrations=function(){return this.obj.integrations||this.proxy("options.providers")||this.options()},s.active=function(){var l=this.proxy("options.active");return l==null&&(l=!0),l},s.anonymousId=function(){return this.field("anonymousId")||this.field("sessionId")},s.sessionId=s.anonymousId,s.groupId=a.proxy("options.groupId"),s.traits=function(l){var f=this.proxy("options.traits")||{},d=this.userId();l=l||{},d&&(f.id=d);for(var v in l)if(Object.prototype.hasOwnProperty.call(l,v)){var h=this[v]==null?this.proxy("options.traits."+v):this[v]();if(h==null)continue;f[l[v]]=h,delete f[v]}return f},s.library=function(){var l=this.proxy("options.library");return l?typeof l=="string"?{name:l,version:null}:l:{name:"unknown",version:null}},s.device=function(){var l=this.proxy("context.device");(typeof l!="object"||l===null)&&(l={});var f=this.library().name;return l.type||(f.indexOf("ios")>-1&&(l.type="ios"),f.indexOf("android")>-1&&(l.type="android")),l},s.userAgent=a.proxy("context.userAgent"),s.timezone=a.proxy("context.timezone"),s.timestamp=a.field("timestamp"),s.channel=a.field("channel"),s.ip=a.proxy("context.ip"),s.userId=a.field("userId"),e.default(s);function c(l){return t.clone(l)}return K}var V={},Se={exports:{}},Ct;function ne(){return Ct||(Ct=1,typeof Object.create=="function"?Se.exports=function(e,t){t&&(e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}))}:Se.exports=function(e,t){if(t){e.super_=t;var r=function(){};r.prototype=t.prototype,e.prototype=new r,e.prototype.constructor=e}}),Se.exports}var kt;function Fn(){if(kt)return V;kt=1;var n=V&&V.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(V,"__esModule",{value:!0}),V.Alias=void 0;var e=n(ne()),t=re();function r(i,o){t.Facade.call(this,i,o)}return V.Alias=r,e.default(r,t.Facade),r.prototype.action=function(){return"alias"},r.prototype.type=r.prototype.action,r.prototype.previousId=function(){return this.field("previousId")||this.field("from")},r.prototype.from=r.prototype.previousId,r.prototype.userId=function(){return this.field("userId")||this.field("to")},r.prototype.to=r.prototype.userId,V}var G={},Ie={},Dt;function Fe(){if(Dt)return Ie;Dt=1,Object.defineProperty(Ie,"__esModule",{value:!0});var n=/.+\@.+\..+/;function e(t){return n.test(t)}return Ie.default=e,Ie}var Ft;function Rn(){if(Ft)return G;Ft=1;var n=G&&G.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(G,"__esModule",{value:!0}),G.Group=void 0;var e=n(ne()),t=n(Fe()),r=n(lt()),i=re();function o(a,s){i.Facade.call(this,a,s)}G.Group=o,e.default(o,i.Facade);var u=o.prototype;return u.action=function(){return"group"},u.type=u.action,u.groupId=i.Facade.field("groupId"),u.created=function(){var a=this.proxy("traits.createdAt")||this.proxy("traits.created")||this.proxy("properties.createdAt")||this.proxy("properties.created");if(a)return r.default(a)},u.email=function(){var a=this.proxy("traits.email");if(a)return a;var s=this.groupId();if(t.default(s))return s},u.traits=function(a){var s=this.properties(),c=this.groupId();a=a||{},c&&(s.id=c);for(var l in a)if(Object.prototype.hasOwnProperty.call(a,l)){var f=this[l]==null?this.proxy("traits."+l):this[l]();if(f==null)continue;s[a[l]]=f,delete s[l]}return s},u.name=i.Facade.proxy("traits.name"),u.industry=i.Facade.proxy("traits.industry"),u.employees=i.Facade.proxy("traits.employees"),u.properties=function(){return this.field("traits")||this.field("properties")||{}},G}var J={},Rt;function hr(){if(Rt)return J;Rt=1;var n=J&&J.__importDefault||function(c){return c&&c.__esModule?c:{default:c}};Object.defineProperty(J,"__esModule",{value:!0}),J.Identify=void 0;var e=re(),t=n(De()),r=n(ne()),i=n(Fe()),o=n(lt()),u=function(c){return c.trim()};function a(c,l){e.Facade.call(this,c,l)}J.Identify=a,r.default(a,e.Facade);var s=a.prototype;return s.action=function(){return"identify"},s.type=s.action,s.traits=function(c){var l=this.field("traits")||{},f=this.userId();c=c||{},f&&(l.id=f);for(var d in c){var v=this[d]==null?this.proxy("traits."+d):this[d]();v!=null&&(l[c[d]]=v,d!==c[d]&&delete l[d])}return l},s.email=function(){var c=this.proxy("traits.email");if(c)return c;var l=this.userId();if(i.default(l))return l},s.created=function(){var c=this.proxy("traits.created")||this.proxy("traits.createdAt");if(c)return o.default(c)},s.companyCreated=function(){var c=this.proxy("traits.company.created")||this.proxy("traits.company.createdAt");if(c)return o.default(c)},s.companyName=function(){return this.proxy("traits.company.name")},s.name=function(){var c=this.proxy("traits.name");if(typeof c=="string")return u(c);var l=this.firstName(),f=this.lastName();if(l&&f)return u(l+" "+f)},s.firstName=function(){var c=this.proxy("traits.firstName");if(typeof c=="string")return u(c);var l=this.proxy("traits.name");if(typeof l=="string")return u(l).split(" ")[0]},s.lastName=function(){var c=this.proxy("traits.lastName");if(typeof c=="string")return u(c);var l=this.proxy("traits.name");if(typeof l=="string"){var f=u(l).indexOf(" ");if(f!==-1)return u(l.substr(f+1))}},s.uid=function(){return this.userId()||this.username()||this.email()},s.description=function(){return this.proxy("traits.description")||this.proxy("traits.background")},s.age=function(){var c=this.birthday(),l=t.default(this.traits(),"age");if(l!=null)return l;if(c instanceof Date){var f=new Date;return f.getFullYear()-c.getFullYear()}},s.avatar=function(){var c=this.traits();return t.default(c,"avatar")||t.default(c,"photoUrl")||t.default(c,"avatarUrl")},s.position=function(){var c=this.traits();return t.default(c,"position")||t.default(c,"jobTitle")},s.username=e.Facade.proxy("traits.username"),s.website=e.Facade.one("traits.website"),s.websites=e.Facade.multi("traits.website"),s.phone=e.Facade.one("traits.phone"),s.phones=e.Facade.multi("traits.phone"),s.address=e.Facade.proxy("traits.address"),s.gender=e.Facade.proxy("traits.gender"),s.birthday=e.Facade.proxy("traits.birthday"),J}var W={},Tt;function ft(){if(Tt)return W;Tt=1;var n=W&&W.__importDefault||function(c){return c&&c.__esModule?c:{default:c}};Object.defineProperty(W,"__esModule",{value:!0}),W.Track=void 0;var e=n(ne()),t=re(),r=hr(),i=n(Fe()),o=n(De());function u(c,l){t.Facade.call(this,c,l)}W.Track=u,e.default(u,t.Facade);var a=u.prototype;a.action=function(){return"track"},a.type=a.action,a.event=t.Facade.field("event"),a.value=t.Facade.proxy("properties.value"),a.category=t.Facade.proxy("properties.category"),a.id=t.Facade.proxy("properties.id"),a.productId=function(){return this.proxy("properties.product_id")||this.proxy("properties.productId")},a.promotionId=function(){return this.proxy("properties.promotion_id")||this.proxy("properties.promotionId")},a.cartId=function(){return this.proxy("properties.cart_id")||this.proxy("properties.cartId")},a.checkoutId=function(){return this.proxy("properties.checkout_id")||this.proxy("properties.checkoutId")},a.paymentId=function(){return this.proxy("properties.payment_id")||this.proxy("properties.paymentId")},a.couponId=function(){return this.proxy("properties.coupon_id")||this.proxy("properties.couponId")},a.wishlistId=function(){return this.proxy("properties.wishlist_id")||this.proxy("properties.wishlistId")},a.reviewId=function(){return this.proxy("properties.review_id")||this.proxy("properties.reviewId")},a.orderId=function(){return this.proxy("properties.id")||this.proxy("properties.order_id")||this.proxy("properties.orderId")},a.sku=t.Facade.proxy("properties.sku"),a.tax=t.Facade.proxy("properties.tax"),a.name=t.Facade.proxy("properties.name"),a.price=t.Facade.proxy("properties.price"),a.total=t.Facade.proxy("properties.total"),a.repeat=t.Facade.proxy("properties.repeat"),a.coupon=t.Facade.proxy("properties.coupon"),a.shipping=t.Facade.proxy("properties.shipping"),a.discount=t.Facade.proxy("properties.discount"),a.shippingMethod=function(){return this.proxy("properties.shipping_method")||this.proxy("properties.shippingMethod")},a.paymentMethod=function(){return this.proxy("properties.payment_method")||this.proxy("properties.paymentMethod")},a.description=t.Facade.proxy("properties.description"),a.plan=t.Facade.proxy("properties.plan"),a.subtotal=function(){var c=o.default(this.properties(),"subtotal"),l=this.total()||this.revenue();if(c)return c;if(!l)return 0;if(this.total()){var f=this.tax();f&&(l-=f),f=this.shipping(),f&&(l-=f),f=this.discount(),f&&(l+=f)}return l},a.products=function(){var c=this.properties(),l=o.default(c,"products");return Array.isArray(l)?l.filter(function(f){return f!==null}):[]},a.quantity=function(){var c=this.obj.properties||{};return c.quantity||1},a.currency=function(){var c=this.obj.properties||{};return c.currency||"USD"},a.referrer=function(){return this.proxy("context.referrer.url")||this.proxy("context.page.referrer")||this.proxy("properties.referrer")},a.query=t.Facade.proxy("options.query"),a.properties=function(c){var l=this.field("properties")||{};c=c||{};for(var f in c)if(Object.prototype.hasOwnProperty.call(c,f)){var d=this[f]==null?this.proxy("properties."+f):this[f]();if(d==null)continue;l[c[f]]=d,delete l[f]}return l},a.username=function(){return this.proxy("traits.username")||this.proxy("properties.username")||this.userId()||this.sessionId()},a.email=function(){var c=this.proxy("traits.email")||this.proxy("properties.email")||this.proxy("options.traits.email");if(c)return c;var l=this.userId();if(i.default(l))return l},a.revenue=function(){var c=this.proxy("properties.revenue"),l=this.event(),f=/^[ _]?completed[ _]?order[ _]?|^[ _]?order[ _]?completed[ _]?$/i;return!c&&l&&l.match(f)&&(c=this.proxy("properties.total")),s(c)},a.cents=function(){var c=this.revenue();return typeof c!="number"?this.value()||0:c*100},a.identify=function(){var c=this.json();return c.traits=this.traits(),new r.Identify(c,this.opts)};function s(c){if(c){if(typeof c=="number")return c;if(typeof c=="string"&&(c=c.replace(/\$/g,""),c=parseFloat(c),!isNaN(c)))return c}}return W}var Q={},jt;function pr(){if(jt)return Q;jt=1;var n=Q&&Q.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(Q,"__esModule",{value:!0}),Q.Page=void 0;var e=n(ne()),t=re(),r=ft(),i=n(Fe());function o(a,s){t.Facade.call(this,a,s)}Q.Page=o,e.default(o,t.Facade);var u=o.prototype;return u.action=function(){return"page"},u.type=u.action,u.category=t.Facade.field("category"),u.name=t.Facade.field("name"),u.title=t.Facade.proxy("properties.title"),u.path=t.Facade.proxy("properties.path"),u.url=t.Facade.proxy("properties.url"),u.referrer=function(){return this.proxy("context.referrer.url")||this.proxy("context.page.referrer")||this.proxy("properties.referrer")},u.properties=function(a){var s=this.field("properties")||{},c=this.category(),l=this.name();a=a||{},c&&(s.category=c),l&&(s.name=l);for(var f in a)if(Object.prototype.hasOwnProperty.call(a,f)){var d=this[f]==null?this.proxy("properties."+f):this[f]();if(d==null)continue;s[a[f]]=d,f!==a[f]&&delete s[f]}return s},u.email=function(){var a=this.proxy("context.traits.email")||this.proxy("properties.email");if(a)return a;var s=this.userId();if(i.default(s))return s},u.fullName=function(){var a=this.category(),s=this.name();return s&&a?a+" "+s:s},u.event=function(a){return a?"Viewed "+a+" Page":"Loaded a Page"},u.track=function(a){var s=this.json();return s.event=this.event(a),s.timestamp=this.timestamp(),s.properties=this.properties(),new r.Track(s,this.opts)},Q}var H={},qt;function Tn(){if(qt)return H;qt=1;var n=H&&H.__importDefault||function(o){return o&&o.__esModule?o:{default:o}};Object.defineProperty(H,"__esModule",{value:!0}),H.Screen=void 0;var e=n(ne()),t=pr(),r=ft();function i(o,u){t.Page.call(this,o,u)}return H.Screen=i,e.default(i,t.Page),i.prototype.action=function(){return"screen"},i.prototype.type=i.prototype.action,i.prototype.event=function(o){return o?"Viewed "+o+" Screen":"Loaded a Screen"},i.prototype.track=function(o){var u=this.json();return u.event=this.event(o),u.timestamp=this.timestamp(),u.properties=this.properties(),new r.Track(u,this.opts)},H}var $={},Lt;function jn(){if(Lt)return $;Lt=1;var n=$&&$.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty($,"__esModule",{value:!0}),$.Delete=void 0;var e=n(ne()),t=re();function r(i,o){t.Facade.call(this,i,o)}return $.Delete=r,e.default(r,t.Facade),r.prototype.type=function(){return"delete"},$}var Nt;function qn(){return Nt||(Nt=1,(function(n){var e=ce&&ce.__assign||function(){return e=Object.assign||function(l){for(var f,d=1,v=arguments.length;d<v;d++){f=arguments[d];for(var h in f)Object.prototype.hasOwnProperty.call(f,h)&&(l[h]=f[h])}return l},e.apply(this,arguments)};Object.defineProperty(n,"__esModule",{value:!0}),n.Delete=n.Screen=n.Page=n.Track=n.Identify=n.Group=n.Alias=n.Facade=void 0;var t=re();Object.defineProperty(n,"Facade",{enumerable:!0,get:function(){return t.Facade}});var r=Fn();Object.defineProperty(n,"Alias",{enumerable:!0,get:function(){return r.Alias}});var i=Rn();Object.defineProperty(n,"Group",{enumerable:!0,get:function(){return i.Group}});var o=hr();Object.defineProperty(n,"Identify",{enumerable:!0,get:function(){return o.Identify}});var u=ft();Object.defineProperty(n,"Track",{enumerable:!0,get:function(){return u.Track}});var a=pr();Object.defineProperty(n,"Page",{enumerable:!0,get:function(){return a.Page}});var s=Tn();Object.defineProperty(n,"Screen",{enumerable:!0,get:function(){return s.Screen}});var c=jn();Object.defineProperty(n,"Delete",{enumerable:!0,get:function(){return c.Delete}}),n.default=e(e({},t.Facade),{Alias:r.Alias,Group:i.Group,Identify:o.Identify,Track:u.Track,Page:a.Page,Screen:s.Screen,Delete:c.Delete})})(ce)),ce}var X=qn();function xe(n,e){var t=new X.Facade(n,e);return n.type==="track"&&(t=new X.Track(n,e)),n.type==="identify"&&(t=new X.Identify(n,e)),n.type==="page"&&(t=new X.Page(n,e)),n.type==="alias"&&(t=new X.Alias(n,e)),n.type==="group"&&(t=new X.Group(n,e)),n.type==="screen"&&(t=new X.Screen(n,e)),Object.defineProperty(t,"obj",{value:n,writable:!0}),t}var Ln=function(n){var e=!1;window.addEventListener("pagehide",function(){e||(e=!0,n(e))}),document.addEventListener("visibilitychange",function(){if(document.visibilityState=="hidden"){if(e)return;e=!0}else e=!1;n(e)})},yr=(function(n){C(e,n);function e(t,r){var i=n.call(this,t)||this;return i.retryTimeout=r,i.name="RateLimitError",i}return e})(Error),Nn=500,Un=64;function dt(n){var e=encodeURI(JSON.stringify(n)).split(/%..|./).length-1;return e/1024}function zn(n){return dt(n)>=Nn-50}function Bn(n){return dt(n)>=Un-10}function Kn(n){var e=[],t=0;return n.forEach(function(r){var i=dt(e[t]);i>=64&&t++,e[t]?e[t].push(r):e[t]=[r]}),e}function Vn(n,e){var t,r,i=[],o=!1,u=(t=e?.size)!==null&&t!==void 0?t:10,a=(r=e?.timeout)!==null&&r!==void 0?r:5e3,s=0;function c(h){var y;if(h.length!==0){var w=(y=h[0])===null||y===void 0?void 0:y.writeKey,_=h.map(function(S){var b=S;b.sentAt;var A=Vt(b,["sentAt"]);return A});return Me("https://".concat(n,"/b"),{keepalive:e?.keepalive||o,headers:{"Content-Type":"text/plain"},method:"post",body:JSON.stringify({writeKey:w,batch:_,sentAt:new Date().toISOString()})}).then(function(S){var b;if(S.status>=500)throw new Error("Bad response from server: ".concat(S.status));if(S.status===429){var A=(b=S.headers)===null||b===void 0?void 0:b.get("x-ratelimit-reset"),E=typeof A=="string"?parseInt(A)*1e3:a;throw new yr("Rate limit exceeded: ".concat(S.status),E)}})}}function l(h){var y;return h===void 0&&(h=1),g(this,void 0,void 0,function(){var w;return m(this,function(_){return i.length?(w=i,i=[],[2,(y=c(w))===null||y===void 0?void 0:y.catch(function(S){var b,A=T.system();A.log("error","Error sending batch",S),h<=((b=e?.maxRetries)!==null&&b!==void 0?b:10)&&(S.name==="RateLimitError"&&(s=S.retryTimeout),i.push.apply(i,w),i.map(function(E){if("_metadata"in E){var P=E;P._metadata=p(p({},P._metadata),{retryCount:h})}}),d(h+1))})]):[2]})})}var f;function d(h){h===void 0&&(h=1),!f&&(f=setTimeout(function(){f=void 0,l(h).catch(console.error)},s||a),s=0)}Ln(function(h){if(o=h,o&&i.length){var y=Kn(i).map(c);Promise.all(y).catch(console.error)}});function v(h,y){return g(this,void 0,void 0,function(){var w;return m(this,function(_){return i.push(y),w=i.length>=u||zn(i)||e?.keepalive&&Bn(i),[2,w||o?l():d()]})})}return{dispatch:v}}function Gn(n){function e(t,r){return Me(t,{keepalive:n?.keepalive,headers:{"Content-Type":"text/plain"},method:"post",body:JSON.stringify(r)}).then(function(i){var o;if(i.status>=500)throw new Error("Bad response from server: ".concat(i.status));if(i.status===429){var u=(o=i.headers)===null||o===void 0?void 0:o.get("x-ratelimit-reset"),a=u?parseInt(u)*1e3:5e3;throw new yr("Rate limit exceeded: ".concat(i.status),a)}})}return{dispatch:e}}function Jn(n,e,t,r,i){var o,u=n.user();delete e.options,e.writeKey=t?.apiKey,e.userId=e.userId||u.id(),e.anonymousId=e.anonymousId||u.anonymousId(),e.sentAt=new Date;var a=n.queue.failedInitializations||[];a.length>0&&(e._metadata={failedInitializations:a}),i!=null&&(i.attempts>1&&(e._metadata=p(p({},e._metadata),{retryCount:i.attempts})),i.attempts++);var s=[],c=[];for(var l in r){var f=r[l];l==="Segment.io"&&s.push(l),f.bundlingStatus==="bundled"&&s.push(l),f.bundlingStatus==="unbundled"&&c.push(l)}for(var d=0,v=t?.unbundledIntegrations||[];d<v.length;d++){var h=v[d];c.includes(h)||c.push(h)}var y=(o=t?.maybeBundledConfigIds)!==null&&o!==void 0?o:{},w=[];return s.sort().forEach(function(_){var S;((S=y[_])!==null&&S!==void 0?S:[]).forEach(function(b){w.push(b)})}),t?.addBundledMetadata!==!1&&(e._metadata=p(p({},e._metadata),{bundled:s.sort(),unbundled:c.sort(),bundledIds:w})),e}var Wn=function(n,e){return g(void 0,void 0,void 0,function(){var t;return m(this,function(r){return t=function(i){return g(void 0,void 0,void 0,function(){var o;return m(this,function(u){switch(u.label){case 0:return n(i)?(o=t,[4,e()]):[3,2];case 1:return[2,o.apply(void 0,[u.sent()])];case 2:return[2]}})})},[2,t(void 0)]})})};function Qn(n,e){return g(this,void 0,void 0,function(){var t,r=this;return m(this,function(i){switch(i.label){case 0:return t=[],ve()?[2,e]:[4,Wn(function(){return e.length>0&&!ve()},function(){return g(r,void 0,void 0,function(){var o,u,a;return m(this,function(s){switch(s.label){case 0:return o=e.pop(),o?[4,de(o,n)]:[2];case 1:return u=s.sent(),a=u instanceof T,a||t.push(o),[2]}})})})];case 1:return i.sent(),t.map(function(o){return e.pushWithBackoff(o)}),[2,e]}})})}function ue(n,e,t,r){var i=this;n||setTimeout(function(){return g(i,void 0,void 0,function(){var o,u;return m(this,function(a){switch(a.label){case 0:return o=!0,[4,Qn(t,e)];case 1:return u=a.sent(),o=!1,e.todo>0&&r(o,u,t,r),[2]}})})},Math.random()*5e3)}function Hn(n,e){var t,r,i,o,u=n.user();return e.previousId=(i=(r=(t=e.previousId)!==null&&t!==void 0?t:e.from)!==null&&r!==void 0?r:u.id())!==null&&i!==void 0?i:u.anonymousId(),e.userId=(o=e.userId)!==null&&o!==void 0?o:e.to,delete e.from,delete e.to,e}var $n=function(n){return n.name==="Segment.io"};function gr(n,e,t){var r,i,o;window.addEventListener("pagehide",function(){a.push.apply(a,Array.from(s)),s.clear()});var u=(r=e?.apiKey)!==null&&r!==void 0?r:"",a=n.options.disableClientPersistence?new et(n.queue.queue.maxAttempts,[]):new it(n.queue.queue.maxAttempts,"".concat(u,":dest-Segment.io")),s=new Set,c=!1,l=(i=e?.apiHost)!==null&&i!==void 0?i:$t,f=(o=e?.protocol)!==null&&o!==void 0?o:"https",d="".concat(f,"://").concat(l),v=e?.deliveryStrategy,h=v?.strategy==="batching"?Vn(l,v.config):Gn(v?.config);function y(_){return g(this,void 0,void 0,function(){var S,b;return m(this,function(A){return ve()?(a.push(_),ue(c,a,w,ue),[2,_]):(s.add(_),S=_.event.type.charAt(0),b=xe(_.event).json(),_.event.type==="track"&&delete b.traits,_.event.type==="alias"&&(b=Hn(n,b)),[2,h.dispatch("".concat(d,"/").concat(S),Jn(n,b,e,t,_)).then(function(){return _}).catch(function(E){if(_.log("error","Error sending event",E),E.name==="RateLimitError"){var P=E.retryTimeout;a.pushWithBackoff(_,P)}else a.pushWithBackoff(_);return ue(c,a,w,ue),_}).finally(function(){s.delete(_)})])})})}var w={metadata:{writeKey:u,apiHost:l,protocol:f},name:"Segment.io",type:"destination",version:"0.1.0",isLoaded:function(){return!0},load:function(){return Promise.resolve()},track:y,identify:y,page:y,alias:y,group:y,screen:y};return a.todo&&ue(c,a,w,ue),w}var L="This is being deprecated and will be not be available in future releases of Analytics JS",Ne=nt(),Ue=Ne?.analytics;function Xn(n,e,t){e===void 0&&(e=!1),t===void 0&&(t=!1);var r=e?10:1,i=t?new et(r,[]):new it(r,n);return new ln(i)}var Zn=(function(){function n(e,t){var r;this.timeout=300,this._getSegmentPluginMetadata=function(){var i;return(i=t.plugins.find($n))===null||i===void 0?void 0:i.metadata},this.writeKey=e.writeKey,this.cdnSettings=(r=e.cdnSettings)!==null&&r!==void 0?r:{integrations:{},edgeFunction:{}},this.cdnURL=e.cdnURL}return Object.defineProperty(n.prototype,"apiHost",{get:function(){var e,t;return(t=(e=this._getSegmentPluginMetadata)===null||e===void 0?void 0:e.call(this))===null||t===void 0?void 0:t.apiHost},enumerable:!1,configurable:!0}),n})();function R(){console.warn(L)}var vt=(function(n){C(e,n);function e(t,r,i,o,u){var a=this,s,c;a=n.call(this)||this,a._debug=!1,a.initialized=!1,a.user=function(){return a._user},a.init=a.initialize.bind(a),a.log=R,a.addIntegrationMiddleware=R,a.listeners=R,a.addEventListener=R,a.removeAllListeners=R,a.removeListener=R,a.removeEventListener=R,a.hasListeners=R,a.add=R,a.addIntegration=R;var l=r?.cookie,f=(s=r?.disableClientPersistence)!==null&&s!==void 0?s:!1;a.queue=i??Xn("".concat(t.writeKey,":event-queue"),r?.retryQueue,f),a.settings=new Zn(t,a.queue);var d=r?.storage;return a._universalStorage=a.createStore(f,d,l),a._user=o??new ut(p({persist:!f,storage:r?.storage},r?.user),l).load(),a._group=u??new lr(p({persist:!f,storage:r?.storage},r?.group),l).load(),a.eventFactory=new rr(a._user),a.integrations=(c=r?.integrations)!==null&&c!==void 0?c:{},a.options=r??{},ot(a),a}return e.prototype.createStore=function(t,r,i){return t?new N([new at]):r&&sr(r)?new N(He(cr(r.stores,i))):new N(He([M.LocalStorage,{name:M.Cookie,settings:i},M.Memory]))},Object.defineProperty(e.prototype,"storage",{get:function(){return this._universalStorage},enumerable:!1,configurable:!0}),e.prototype.track=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];return g(this,void 0,void 0,function(){var i,o,u,a,s,c,l,f=this;return m(this,function(d){return i=oe(t),o=Qt.apply(void 0,t),u=o[0],a=o[1],s=o[2],c=o[3],l=this.eventFactory.track(u,a,s,this.integrations,i),[2,this._dispatch(l,c).then(function(v){return f.emit("track",u,v.event.properties,v.event.options),v})]})})},e.prototype.page=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];return g(this,void 0,void 0,function(){var i,o,u,a,s,c,l,f,d=this;return m(this,function(v){return i=oe(t),o=Ge.apply(void 0,t),u=o[0],a=o[1],s=o[2],c=o[3],l=o[4],f=this.eventFactory.page(u,a,s,c,this.integrations,i),[2,this._dispatch(f,l).then(function(h){return d.emit("page",u,a,h.event.properties,h.event.options),h})]})})},e.prototype.identify=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];return g(this,void 0,void 0,function(){var i,o,u,a,s,c,l,f=this;return m(this,function(d){return i=oe(t),o=Je(this._user).apply(void 0,t),u=o[0],a=o[1],s=o[2],c=o[3],this._user.identify(u,a),l=this.eventFactory.identify(this._user.id(),this._user.traits(),s,this.integrations,i),[2,this._dispatch(l,c).then(function(v){return f.emit("identify",v.event.userId,v.event.traits,v.event.options),v})]})})},e.prototype.group=function(){for(var t=this,r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];var o=oe(r);if(r.length===0)return this._group;var u=Je(this._group).apply(void 0,r),a=u[0],s=u[1],c=u[2],l=u[3];this._group.identify(a,s);var f=this._group.id(),d=this._group.traits(),v=this.eventFactory.group(f,d,c,this.integrations,o);return this._dispatch(v,l).then(function(h){return t.emit("group",h.event.groupId,h.event.traits,h.event.options),h})},e.prototype.alias=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];return g(this,void 0,void 0,function(){var i,o,u,a,s,c,l,f=this;return m(this,function(d){return i=oe(t),o=Ht.apply(void 0,t),u=o[0],a=o[1],s=o[2],c=o[3],l=this.eventFactory.alias(u,a,s,this.integrations,i),[2,this._dispatch(l,c).then(function(v){return f.emit("alias",u,a,v.event.options),v})]})})},e.prototype.screen=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];return g(this,void 0,void 0,function(){var i,o,u,a,s,c,l,f,d=this;return m(this,function(v){return i=oe(t),o=Ge.apply(void 0,t),u=o[0],a=o[1],s=o[2],c=o[3],l=o[4],f=this.eventFactory.screen(u,a,s,c,this.integrations,i),[2,this._dispatch(f,l).then(function(h){return d.emit("screen",u,a,h.event.properties,h.event.options),h})]})})},e.prototype.trackClick=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];return g(this,void 0,void 0,function(){var i,o;return m(this,function(u){switch(u.label){case 0:return[4,D(()=>import("./auto-track-C8_AVCKY.js"),__vite__mapDeps([0,1,2]))];case 1:return i=u.sent(),[2,(o=i.link).call.apply(o,x([this],t,!1))]}})})},e.prototype.trackLink=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];return g(this,void 0,void 0,function(){var i,o;return m(this,function(u){switch(u.label){case 0:return[4,D(()=>import("./auto-track-C8_AVCKY.js"),__vite__mapDeps([0,1,2]))];case 1:return i=u.sent(),[2,(o=i.link).call.apply(o,x([this],t,!1))]}})})},e.prototype.trackSubmit=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];return g(this,void 0,void 0,function(){var i,o;return m(this,function(u){switch(u.label){case 0:return[4,D(()=>import("./auto-track-C8_AVCKY.js"),__vite__mapDeps([0,1,2]))];case 1:return i=u.sent(),[2,(o=i.form).call.apply(o,x([this],t,!1))]}})})},e.prototype.trackForm=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];return g(this,void 0,void 0,function(){var i,o;return m(this,function(u){switch(u.label){case 0:return[4,D(()=>import("./auto-track-C8_AVCKY.js"),__vite__mapDeps([0,1,2]))];case 1:return i=u.sent(),[2,(o=i.form).call.apply(o,x([this],t,!1))]}})})},e.prototype.register=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];return g(this,void 0,void 0,function(){var i,o,u=this;return m(this,function(a){switch(a.label){case 0:return i=T.system(),o=t.map(function(s){return u.queue.register(i,s,u)}),[4,Promise.all(o)];case 1:return a.sent(),[2,i]}})})},e.prototype.deregister=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];return g(this,void 0,void 0,function(){var i,o,u=this;return m(this,function(a){switch(a.label){case 0:return i=T.system(),o=t.map(function(s){var c=u.queue.plugins.find(function(l){return l.name===s});if(c)return u.queue.deregister(i,c,u);i.log("warn","plugin ".concat(s," not found"))}),[4,Promise.all(o)];case 1:return a.sent(),[2,i]}})})},e.prototype.debug=function(t){return t===!1&&localStorage.getItem("debug")&&localStorage.removeItem("debug"),this._debug=t,this},e.prototype.reset=function(){this._user.reset(),this._group.reset(),this.emit("reset")},e.prototype.timeout=function(t){this.settings.timeout=t},e.prototype._dispatch=function(t,r){return g(this,void 0,void 0,function(){var i;return m(this,function(o){return i=new T(t),ve()&&!this.options.retryQueue?[2,i]:[2,Qr(i,this.queue,this,{callback:r,debug:this._debug,timeout:this.settings.timeout})]})})},e.prototype.addSourceMiddleware=function(t){return g(this,void 0,void 0,function(){var r=this;return m(this,function(i){switch(i.label){case 0:return[4,this.queue.criticalTasks.run(function(){return g(r,void 0,void 0,function(){var o,u,a;return m(this,function(s){switch(s.label){case 0:return[4,D(()=>Promise.resolve().then(()=>pi),void 0)];case 1:return o=s.sent().sourceMiddlewarePlugin,u={},this.queue.plugins.forEach(function(c){if(c.type==="destination")return u[c.name]=!0}),a=o(t,u),[4,this.register(a)];case 2:return s.sent(),[2]}})})})];case 1:return i.sent(),[2,this]}})})},e.prototype.addDestinationMiddleware=function(t){for(var r=[],i=1;i<arguments.length;i++)r[i-1]=arguments[i];return this.queue.plugins.filter(nr).forEach(function(o){(t==="*"||o.name.toLowerCase()===t.toLowerCase())&&o.addMiddleware.apply(o,r)}),Promise.resolve(this)},e.prototype.setAnonymousId=function(t){return this._user.anonymousId(t)},e.prototype.queryString=function(t){return g(this,void 0,void 0,function(){var r;return m(this,function(i){switch(i.label){case 0:return this.options.useQueryString===!1?[2,[]]:[4,D(()=>import("./index-DgeuBwzr.js"),__vite__mapDeps([3,1,2]))];case 1:return r=i.sent().queryString,[2,r(this,t)]}})})},e.prototype.use=function(t){return t(this),this},e.prototype.ready=function(t){return t===void 0&&(t=function(r){return r}),g(this,void 0,void 0,function(){return m(this,function(r){return[2,Promise.all(this.queue.plugins.map(function(i){return i.ready?i.ready():Promise.resolve()})).then(function(i){return t(i),i})]})})},e.prototype.noConflict=function(){return console.warn(L),mn(Ue??this),this},e.prototype.normalize=function(t){return console.warn(L),this.eventFactory.normalize(t)},Object.defineProperty(e.prototype,"failedInitializations",{get:function(){return console.warn(L),this.queue.failedInitializations},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"VERSION",{get:function(){return Ce},enumerable:!1,configurable:!0}),e.prototype.initialize=function(t,r){return g(this,void 0,void 0,function(){return m(this,function(i){return console.warn(L),[2,Promise.resolve(this)]})})},e.prototype.pageview=function(t){return g(this,void 0,void 0,function(){return m(this,function(r){switch(r.label){case 0:return console.warn(L),[4,this.page({path:t})];case 1:return r.sent(),[2,this]}})})},Object.defineProperty(e.prototype,"plugins",{get:function(){var t;return console.warn(L),(t=this._plugins)!==null&&t!==void 0?t:{}},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"Integrations",{get:function(){console.warn(L);var t=this.queue.plugins.filter(function(r){return r.type==="destination"}).reduce(function(r,i){var o="".concat(i.name.toLowerCase().replace(".","").split(" ").join("-"),"Integration"),u=window[o];if(!u)return r;var a=u.Integration;return a?(r[i.name]=a,r):(r[i.name]=u,r)},{});return t},enumerable:!1,configurable:!0}),e.prototype.push=function(t){var r=this,i=t.shift();i&&!r[i]||r[i].apply(this,t)},e})(Ye),Ut=(function(n){C(e,n);function e(){var t=n.call(this,{writeKey:""},{disableClientPersistence:!0})||this;return t.initialized=!0,t}return e})(vt),zt={};function mr(){return typeof process>"u"||!zt?{}:zt}var Yn=/(https:\/\/.*)\/analytics\.js\/v1\/(?:.*?)\/(?:platform|analytics.*)?/,ei=function(){var n,e=Array.prototype.slice.call(document.querySelectorAll("script"));return e.forEach(function(t){var r,i=(r=t.getAttribute("src"))!==null&&r!==void 0?r:"",o=Yn.exec(i);o&&o[1]&&(n=o[1])}),n},Ae,ti=function(){var n,e=Ae??((n=ct())===null||n===void 0?void 0:n._cdn);return e},ri=function(n){var e=ct();e&&(e._cdn=n),Ae=n},ht=function(){var n=ti();if(n)return n;var e=ei();return e||"https://cdn.segment.com"},Ri=function(){var n=ht();return"".concat(n,"/next-integrations")};function ni(n,e){var t,r=Object.entries((t=e.integrations)!==null&&t!==void 0?t:{}).reduce(function(i,o){var u,a,s=o[0],c=o[1];return typeof c=="object"?p(p({},i),(u={},u[s]=c,u)):p(p({},i),(a={},a[s]={},a))},{});return Object.entries(n.integrations).reduce(function(i,o){var u,a=o[0],s=o[1];return p(p({},i),(u={},u[a]=p(p({},s),r[a]),u))},{})}function ii(n){try{return decodeURIComponent(n.replace(/\+/g," "))}catch{return n}}function oi(n){return g(this,void 0,void 0,function(){var e;return m(this,function(t){return e=navigator.userAgentData,e?n?[2,e.getHighEntropyValues(n).catch(function(){return e.toJSON()})]:[2,e.toJSON()]:[2,void 0]})})}var fe;function ai(){if(fe)return fe;var n=ar(window.location.href);return fe={expires:31536e6,secure:!1,path:"/"},n&&(fe.domain=n),fe}function ui(n){var e={btid:"dataxu",urid:"millennial-media"};n.startsWith("?")&&(n=n.substring(1)),n=n.replace(/\?/g,"&");for(var t=n.split("&"),r=0,i=t;r<i.length;r++){var o=i[r],u=o.split("="),a=u[0],s=u[1];if(e[a])return{id:s,type:e[a]}}}function si(n){return n.startsWith("?")&&(n=n.substring(1)),n=n.replace(/\?/g,"&"),n.split("&").reduce(function(e,t){var r=t.split("="),i=r[0],o=r[1],u=o===void 0?"":o;if(i.includes("utm_")&&i.length>4){var a=i.slice(4);a==="campaign"&&(a="name"),e[a]=ii(u)}return e},{})}function ci(){var n=q.get("_ga");if(n&&n.startsWith("amp"))return n}function li(n,e,t){var r,i=new N(t?[]:[new ur(ai())]),o=i.get("s:context.referrer"),u=(r=ui(n))!==null&&r!==void 0?r:o;u&&(e&&(e.referrer=p(p({},e.referrer),u)),i.set("s:context.referrer",u))}var fi=function(n){try{var e=new URLSearchParams;return Object.entries(n).forEach(function(t){var r=t[0],i=t[1];Array.isArray(i)?i.forEach(function(o){return e.append(r,o)}):e.append(r,i)}),e.toString()}catch{return""}},di=(function(){function n(){var e=this;this.name="Page Enrichment",this.type="before",this.version="0.1.0",this.isLoaded=function(){return!0},this.load=function(t,r){return g(e,void 0,void 0,function(){var i;return m(this,function(o){switch(o.label){case 0:this.instance=r,o.label=1;case 1:return o.trys.push([1,3,,4]),i=this,[4,oi(this.instance.options.highEntropyValuesClientHints)];case 2:return i.userAgentData=o.sent(),[3,4];case 3:return o.sent(),[3,4];case 4:return[2,Promise.resolve()]}})})},this.enrich=function(t){var r,i,o=t.event.context,u=o.page.search||"",a=typeof u=="object"?fi(u):u;o.userAgent=navigator.userAgent,o.userAgentData=e.userAgentData;var s=navigator.userLanguage||navigator.language;typeof o.locale>"u"&&typeof s<"u"&&(o.locale=s),(r=o.library)!==null&&r!==void 0||(o.library={name:"analytics.js",version:"".concat("npm:next","-").concat(Ce)}),a&&!o.campaign&&(o.campaign=si(a));var c=ci();c&&(o.amp={id:c}),li(a,o,(i=e.instance.options.disableClientPersistence)!==null&&i!==void 0?i:!1);try{o.timezone=Intl.DateTimeFormat().resolvedOptions().timeZone}catch{}return t},this.track=this.enrich,this.identify=this.enrich,this.page=this.enrich,this.group=this.enrich,this.alias=this.enrich,this.screen=this.enrich}return n})(),vi=new di;function br(n){var e=Array.prototype.slice.call(window.document.querySelectorAll("script"));return e.find(function(t){return t.src===n})}function ze(n,e){var t=br(n);if(t!==void 0){var r=t?.getAttribute("status");if(r==="loaded")return Promise.resolve(t);if(r==="loading")return new Promise(function(i,o){t.addEventListener("load",function(){return i(t)}),t.addEventListener("error",function(u){return o(u)})})}return new Promise(function(i,o){var u,a=window.document.createElement("script");a.type="text/javascript",a.src=n,a.async=!0,a.setAttribute("status","loading");for(var s=0,c=Object.entries({});s<c.length;s++){var l=c[s],f=l[0],d=l[1];a.setAttribute(f,d)}a.onload=function(){a.onerror=a.onload=null,a.setAttribute("status","loaded"),i(a)},a.onerror=function(){a.onerror=a.onload=null,a.setAttribute("status","error"),o(new Error("Failed to load ".concat(n)))};var v=window.document.querySelector("script");v?(u=v.parentElement)===null||u===void 0||u.insertBefore(a,v):window.document.head.appendChild(a)})}function Ti(n){var e=br(n);return e!==void 0&&e.remove(),Promise.resolve()}function _r(n,e,t){return g(this,void 0,void 0,function(){function r(c,l){return g(this,void 0,void 0,function(){var f,d,v;return m(this,function(h){switch(h.label){case 0:return f=!1,d=null,[4,l({payload:xe(c,{clone:!0,traverse:!1}),integration:n,next:function(y){f=!0,y===null&&(d=null),y&&(d=y.obj)}})];case 1:return h.sent(),!f&&d!==null&&(d=d,d.integrations=p(p({},c.integrations),(v={},v[n]=!1,v))),[2,d]}})})}var i,o,u,a,s;return m(this,function(c){switch(c.label){case 0:i=xe(e,{clone:!0,traverse:!1}).rawEvent(),o=0,u=t,c.label=1;case 1:return o<u.length?(a=u[o],[4,r(i,a)]):[3,4];case 2:if(s=c.sent(),s===null)return[2,null];i=s,c.label=3;case 3:return o++,[3,1];case 4:return[2,i]}})})}function hi(n,e){function t(r){return g(this,void 0,void 0,function(){var i;return m(this,function(o){switch(o.label){case 0:return i=!1,[4,n({payload:xe(r.event,{clone:!0,traverse:!1}),integrations:e??{},next:function(u){i=!0,u&&(r.event=u.obj)}})];case 1:if(o.sent(),!i)throw new ee({retry:!1,type:"middleware_cancellation",reason:"Middleware `next` function skipped"});return[2,r]}})})}return{name:"Source Middleware ".concat(n.name),type:"before",version:"0.1.0",isLoaded:function(){return!0},load:function(r){return Promise.resolve(r)},track:t,page:t,identify:t,alias:t,group:t}}const pi=Object.freeze(Object.defineProperty({__proto__:null,applyDestinationMiddleware:_r,sourceMiddlewarePlugin:hi},Symbol.toStringTag,{value:"Module"}));function Ee(n,e){var t=e.methodName,r=e.integrationName,i=e.type,o=e.didError,u=o===void 0?!1:o;n.stats.increment("analytics_js.integration.invoke".concat(u?".error":""),1,["method:".concat(t),"integration_name:".concat(r),"type:".concat(i)])}var yi=(function(){function n(e,t){this.version="1.0.0",this.alternativeNames=[],this.loadPromise=Gt(),this.middleware=[],this.alias=this._createMethod("alias"),this.group=this._createMethod("group"),this.identify=this._createMethod("identify"),this.page=this._createMethod("page"),this.screen=this._createMethod("screen"),this.track=this._createMethod("track"),this.action=t,this.name=e,this.type=t.type,this.alternativeNames.push(t.name)}return n.prototype.addMiddleware=function(){for(var e,t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];this.type==="destination"&&(e=this.middleware).push.apply(e,t)},n.prototype.transform=function(e){return g(this,void 0,void 0,function(){var t;return m(this,function(r){switch(r.label){case 0:return[4,_r(this.name,e.event,this.middleware)];case 1:return t=r.sent(),t===null&&e.cancel(new ee({retry:!1,reason:"dropped by destination middleware"})),[2,new T(t)]}})})},n.prototype._createMethod=function(e){var t=this;return function(r){return g(t,void 0,void 0,function(){var i,o;return m(this,function(u){switch(u.label){case 0:return this.action[e]?(i=r,this.type!=="destination"?[3,2]:[4,this.transform(r)]):[2,r];case 1:i=u.sent(),u.label=2;case 2:return u.trys.push([2,5,,6]),[4,this.ready()];case 3:if(!u.sent())throw new Error("Something prevented the destination from getting ready");return Ee(r,{integrationName:this.action.name,methodName:e,type:"action"}),[4,this.action[e](i)];case 4:return u.sent(),[3,6];case 5:throw o=u.sent(),Ee(r,{integrationName:this.action.name,methodName:e,type:"action",didError:!0}),o;case 6:return[2,r]}})})}},n.prototype.isLoaded=function(){return this.action.isLoaded()},n.prototype.ready=function(){return g(this,void 0,void 0,function(){return m(this,function(e){switch(e.label){case 0:return e.trys.push([0,2,,3]),[4,this.loadPromise.promise];case 1:return e.sent(),[2,!0];case 2:return e.sent(),[2,!1];case 3:return[2]}})})},n.prototype.load=function(e,t){return g(this,void 0,void 0,function(){var r,i,o,u;return m(this,function(a){switch(a.label){case 0:if(this.loadPromise.isSettled())return[2,this.loadPromise.promise];a.label=1;case 1:return a.trys.push([1,3,,4]),Ee(e,{integrationName:this.action.name,methodName:"load",type:"action"}),r=this.action.load(e,t),o=(i=this.loadPromise).resolve,[4,r];case 2:return o.apply(i,[a.sent()]),[2,r];case 3:throw u=a.sent(),Ee(e,{integrationName:this.action.name,methodName:"load",type:"action",didError:!0}),this.loadPromise.reject(u),u;case 4:return[2]}})})},n.prototype.unload=function(e,t){var r,i;return(i=(r=this.action).unload)===null||i===void 0?void 0:i.call(r,e,t)},n})();function gi(n){if(!Array.isArray(n))throw new Error("Not a valid list of plugins");var e=["load","isLoaded","name","version","type"];return n.forEach(function(t){e.forEach(function(r){var i;if(t[r]===void 0)throw new Error("Plugin: ".concat((i=t.name)!==null&&i!==void 0?i:"unknown"," missing required function ").concat(r))})}),!0}function mi(n,e){var t=n[e.creationName],r=n[e.name];return n.All===!1&&!t&&!r||t===!1||r===!1}function bi(n,e){return g(this,void 0,void 0,function(){var t,r,i,o,u,a;return m(this,function(s){switch(s.label){case 0:if(s.trys.push([0,9,,10]),t=new RegExp("https://cdn.segment.(com|build)"),r=ht(),!e)return[3,6];i=n.url.split("/"),o=i[i.length-2],u=n.url.replace(o,btoa(o).replace(/=/g,"")),s.label=1;case 1:return s.trys.push([1,3,,5]),[4,ze(u.replace(t,r))];case 2:return s.sent(),[3,5];case 3:return s.sent(),[4,ze(n.url.replace(t,r))];case 4:return s.sent(),[3,5];case 5:return[3,8];case 6:return[4,ze(n.url.replace(t,r))];case 7:s.sent(),s.label=8;case 8:return typeof window[n.libraryName]=="function"?[2,window[n.libraryName]]:[3,10];case 9:throw a=s.sent(),console.error("Failed to create PluginFactory",n),a;case 10:return[2]}})})}function _i(n,e,t,r,i,o){var u,a,s;return g(this,void 0,void 0,function(){var c,l,f,d=this;return m(this,function(v){switch(v.label){case 0:return c=[],l=(a=(u=n.middlewareSettings)===null||u===void 0?void 0:u.routingRules)!==null&&a!==void 0?a:[],f=((s=n.remotePlugins)!==null&&s!==void 0?s:[]).map(function(h){return g(d,void 0,void 0,function(){var y,w,_,S,b,A;return m(this,function(E){switch(E.label){case 0:if(mi(e,h))return[2];E.label=1;case 1:return E.trys.push([1,6,,7]),w=o?.find(function(P){var k=P.pluginName;return k===h.name}),w?[3,3]:[4,bi(h,r?.obfuscate)];case 2:w=E.sent(),E.label=3;case 3:return y=w,y?[4,y(p(p({},h.settings),t[h.name]))]:[3,5];case 4:_=E.sent(),S=Array.isArray(_)?_:[_],gi(S),b=l.filter(function(P){return P.destinationName===h.creationName}),S.forEach(function(P){var k=new yi(h.creationName,P);b.length&&i&&k.addMiddleware(i),c.push(k)}),E.label=5;case 5:return[3,7];case 6:return A=E.sent(),console.warn("Failed to load Remote Plugin",A),[3,7];case 7:return[2]}})})}),[4,Promise.all(f)];case 1:return v.sent(),[2,c.filter(Boolean)]}})})}var Be,Bt,wi=nt(),Kt=(Be=(Bt=wi).__SEGMENT_INSPECTOR__)!==null&&Be!==void 0?Be:Bt.__SEGMENT_INSPECTOR__={},Si=function(n){var e;return(e=Kt.attach)===null||e===void 0?void 0:e.call(Kt,n)};function Ii(n,e){return Me("".concat(e,"/v1/projects/").concat(n,"/settings")).then(function(t){return t.ok?t.json():t.text().then(function(r){throw new Error(r)})}).catch(function(t){throw console.error(t.message),t})}function Ei(n){return mr().NODE_ENV!=="test"&&Object.keys(n.integrations).length>1}function Pi(n){var e,t,r;return mr().NODE_ENV!=="test"&&((r=(t=(e=n.middlewareSettings)===null||e===void 0?void 0:e.routingRules)===null||t===void 0?void 0:t.length)!==null&&r!==void 0?r:0)>0}function Ai(n,e){In(n,e),Sn(n,e)}function Oi(n,e){return g(this,void 0,void 0,function(){return m(this,function(t){switch(t.label){case 0:return[4,_n(n,e)];case 1:return t.sent(),En(n,e),[2]}})})}function xi(n,e,t,r,i,o,u){var a,s,c;return i===void 0&&(i=[]),g(this,void 0,void 0,function(){var l,f,d,v,h,y,w,_,S,b,A,E,P,k,U,he=this;return m(this,function(O){switch(O.label){case 0:return Ai(t,u),l=i?.filter(function(I){return typeof I=="object"}),f=i?.filter(function(I){return typeof I=="function"&&typeof I.pluginName=="string"}),Pi(e)?[4,D(()=>import("./index-CtQ5SWOa.js"),[]).then(function(I){return I.tsubMiddleware(e.middlewareSettings.routingRules)})]:[3,2];case 1:return v=O.sent(),[3,3];case 2:v=void 0,O.label=3;case 3:return d=v,Ei(e)||o.length>0?[4,D(()=>import("./index-Bc6QCTlr.js"),__vite__mapDeps([4,1,2,5])).then(function(I){return I.ajsDestinations(n,e,t.integrations,r,d,o)})]:[3,5];case 4:return y=O.sent(),[3,6];case 5:y=[],O.label=6;case 6:return h=y,e.legacyVideoPluginsEnabled?[4,D(()=>import("./index-Cva98ZVp.js"),__vite__mapDeps([6,1,2])).then(function(I){return I.loadLegacyVideoPlugins(t)})]:[3,8];case 7:O.sent(),O.label=8;case 8:return!((a=r.plan)===null||a===void 0)&&a.track?[4,D(()=>import("./index-BVbjJzGG.js"),__vite__mapDeps([7,1,2,5])).then(function(I){var z;return I.schemaFilter((z=r.plan)===null||z===void 0?void 0:z.track,e)})]:[3,10];case 9:return _=O.sent(),[3,11];case 10:_=void 0,O.label=11;case 11:return w=_,S=ni(e,r),[4,_i(e,t.integrations,S,r,d,f).catch(function(){return[]})];case 12:return b=O.sent(),A=x(x([vi],h,!0),b,!0),w&&A.push(w),E=((s=r.integrations)===null||s===void 0?void 0:s.All)===!1&&!r.integrations["Segment.io"]||r.integrations&&r.integrations["Segment.io"]===!1,E?[3,14]:(k=(P=A).push,[4,gr(t,S["Segment.io"],e.integrations)]);case 13:k.apply(P,[O.sent()]),O.label=14;case 14:return[4,t.register.apply(t,x(x([],A,!1),l,!1))];case 15:return U=O.sent(),[4,wn(t,u)];case 16:return O.sent(),Object.entries((c=e.enabledMiddleware)!==null&&c!==void 0?c:{}).some(function(I){var z=I[1];return z})?[4,D(()=>import("./index-DAbVYIPT.js"),__vite__mapDeps([8,1,2])).then(function(I){var z=I.remoteMiddlewares;return g(he,void 0,void 0,function(){var pt,yt;return m(this,function(gt){switch(gt.label){case 0:return[4,z(U,e,r.obfuscate)];case 1:return pt=gt.sent(),yt=pt.map(function(wr){return t.addSourceMiddleware(wr)}),[2,Promise.all(yt)]}})})})]:[3,18];case 17:O.sent(),O.label=18;case 18:return[2,U]}})})}function Mi(n,e,t){var r,i,o,u,a,s,c,l,f,d,v;return e===void 0&&(e={}),g(this,void 0,void 0,function(){var h,y,w,_,S,b,A,E,P,k,U,he,O;return m(this,function(I){switch(I.label){case 0:return e.disable===!0?[2,[new Ut,T.system()]]:(e.globalAnalyticsKey&&gn(e.globalAnalyticsKey),n.cdnURL&&ri(n.cdnURL),e.initialPageview&&t.add(new $e("page",[])),h=(r=n.cdnURL)!==null&&r!==void 0?r:ht(),(i=n.cdnSettings)!==null&&i!==void 0?(w=i,[3,3]):[3,1]);case 1:return[4,Ii(n.writeKey,h)];case 2:w=I.sent(),I.label=3;case 3:return y=w,e.updateCDNSettings&&(y=e.updateCDNSettings(y)),typeof e.disable!="function"?[3,5]:[4,e.disable(y)];case 4:if(_=I.sent(),_)return[2,[new Ut,T.system()]];I.label=5;case 5:return S=(u=(o=y.integrations["Segment.io"])===null||o===void 0?void 0:o.retryQueue)!==null&&u!==void 0?u:!0,e=p({retryQueue:S},e),b=new vt(p(p({},n),{cdnSettings:y,cdnURL:h}),e),Si(b),A=(a=n.plugins)!==null&&a!==void 0?a:[],E=(s=n.classicIntegrations)!==null&&s!==void 0?s:[],P=(c=e.integrations)===null||c===void 0?void 0:c["Segment.io"],Xt.initRemoteMetrics(p(p({},y.metrics),{host:(l=P?.apiHost)!==null&&l!==void 0?l:(f=y.metrics)===null||f===void 0?void 0:f.host,protocol:P?.protocol})),[4,xi(n.writeKey,y,b,e,A,E,t)];case 6:return k=I.sent(),U=(d=window.location.search)!==null&&d!==void 0?d:"",he=(v=window.location.hash)!==null&&v!==void 0?v:"",O=U.length?U:he.replace(/(?=#).*(?=\?)/,""),O.includes("ajs_")?[4,b.queryString(O).catch(console.error)]:[3,8];case 7:I.sent(),I.label=8;case 8:return b.initialized=!0,b.emit("initialize",n,e),[4,Oi(b,t)];case 9:return I.sent(),[2,[b,k]]}})})}var Ci=(function(n){C(e,n);function e(){var t=this,r=Gt(),i=r.promise,o=r.resolve;return t=n.call(this,function(u){return i.then(function(a){var s=a[0],c=a[1];return Mi(s,c,u)})})||this,t._resolveLoadStart=function(u,a){return o([u,a])},t}return e.prototype.load=function(t,r){return r===void 0&&(r={}),this._resolveLoadStart(t,r),this},e.load=function(t,r){return r===void 0&&(r={}),new e().load(t,r)},e.standalone=function(t,r){return e.load({writeKey:t},r).then(function(i){return i[0]})},e})(An),ki=(function(){function n(){}return n.load=function(){return Promise.reject(new Error("AnalyticsNode is not available in browsers."))},n})();const ji=Object.freeze(Object.defineProperty({__proto__:null,Analytics:vt,AnalyticsBrowser:Ci,AnalyticsNode:ki,Context:T,ContextCancelation:ee,EventFactory:rr,Group:lr,UniversalStorage:N,User:ut,getGlobalAnalytics:ct,isDestinationPluginWithAddMiddleware:nr,resolveAliasArguments:Ht,resolveArguments:Qt,resolvePageArguments:Ge,resolveUserArguments:Je,segmentio:gr},Symbol.toStringTag,{value:"Module"}));export{ee as C,et as P,Ri as a,ve as b,_r as c,X as d,Fi as e,Gt as f,ii as g,it as h,F as i,Wn as j,de as k,ze as l,ni as m,T as n,Hr as o,Rr as p,ji as q,Ee as r,Ti as u};
